<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>¯\_(ツ)_/¯</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/agency.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">ECE 3400: Group 3</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav text-uppercase ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#team"><b>Teams</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#ContractEthics"><b>Contract & Ethics</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#labs"><b>Labs</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#milestones"><b>Milestones</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#schedule"><b>Schedule</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="https://www.youtube.com/channel/UCoPtKPpXSNkzQ-EIfkcnQlg"><b>Youtube</b></a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead">
      <div class="container">
        <div class="intro-text">
          <div class="intro-lead-in"><b>¯\_(ツ)_/¯</b></div>
          <div class="intro-heading text-uppercase">Meet Brooklynn</div>
          <a class="btn btn-primary btn-xl" href=https://github.com/sofyacalvin/ece3400-group3>Github</a>
            </button>
        </div>
      </div>
    </header>

    <!-- Team -->

    <section class="bg-light" id="team">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Meet the Team</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <div class="team-member">
              <img class="mx-auto rounded-circle" src="img/team/amanda.jpg" alt="">
              <h4>Amanda Trang</h4>
              <p class="text-muted">Amanda Trang is a junior in ECE with an interest in electronics, robotics, and game design. Her hobbies include playing piano, rock climbing, and video games– she also enjoys taking mediocre photos of dogs (ask her to show you photos of her dog!).</p>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="team-member">
              <img class="mx-auto rounded-circle" src="img/team/David.jpg" alt="">
              <h4>David Kim</h4>
              <p class="text-muted">David Kim is a senior in ECE with interests in software and hardware. He likes to play basketball and also likes to play the drums during his free time. He enjoys listening to music and has some interests in musical instruments and music in general.</p>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="team-member">
              <img class="mx-auto rounded-circle" src="img/team/dylan.jpg" alt="">
              <h4>Dylan Machado</h4>
              <p class="text-muted">Dylan Machado is a junior in ECE with interests in hardware in software. He enjoys traveling, food, and dogs.</p>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="team-member">
              <img class="mx-auto rounded-circle" src="img/team/emmett.jpg" alt="">
              <h4>Emmett Milliken</h4>
              <p class="text-muted">Emmett Milliken is a junior in ECE with the future goal of going in to research and development of entertainment lighting fixtures. He loves colors and moving things you can program, and automated entertainment lighting is a great fusion of those. In addition to lighting, he is also interested in all other kinds of entertainment/production/stage tech, including audio and special effects equipment. When he is not doing school or tech related things, he enjoys hiking, kayaking, quilting, and finding any excuse to use label makers and power tools.</p>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="team-member">
              <img class="mx-auto rounded-circle" src="img/team/sofya.jpg" alt="">
              <h4>Sofya Calvin</h4>
              <p class="text-muted">Sofya Calvin is a junior in ECE interested in pursuing a career in energy, more specifically regarding renewable energy, (smart) power grids, and energy storage. She hopes to one day bridge her technical skills with her political knowledge and work to shape the future of energy policy. In her spare time, Sofya loves to dance and is a member of two dance teams on campus. She also enjoys working out, listening to music, attending concerts, and being spontaneous/adventurous.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contract & Ethics -->
    <section class="bg-light" id="ContractEthics">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Contract & Ethics</h2>
          </div>
        </div>
      </div>
    </div>
    <section class="bg-light" id="portfolio">
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#Contract">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/Contract.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Team Contract</h4>
              <p class="text-muted"></p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#Ethics">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/seniorrobot.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Ethics</h4>
              <p class="text-muted">The Ethics of Robotics in Elderly Caretaking</p>
            </div>
          </div>
        </div>
      </div>
    </section>
            
    <!-- Lab Grid -->
    <section class="bg-light" id="labs">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Labs</h2>
          </div>
        </div>
      </div>
    </div>
    <section class="bg-light" id="portfolio">
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#Lab1">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/stock-microcontroller.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Lab 1</h4>
              <p class="text-muted">Microcontrollers</p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#Lab2">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/analogcircuits.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Lab 2</h4>
              <p class="text-muted">Analog Circuitry and FFTs</p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#Lab3">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/FPGA.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Lab 3</h4>
              <p class="text-muted">FPGA Video Controller and Sound Generation</p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#Lab4">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/Electret.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Lab 4</h4>
              <p class="text-muted">Radio Communication and Map Drawing</p>
            </div>
          </div>
        </div>
      </div>
    </section>

        <!-- Milestones -->
        <section class="bg-light" id="milestones">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Milestones</h2>
          </div>
        </div>
      </div>
    </div>
    <section class="bg-light" id="portfolio">
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#milestone1">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/navigation.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Milestone 1</h4>
              <p class="text-muted">Navigation</p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#milestone2">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/oscilloscope.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Milestone 2</h4>
              <p class="text-muted">Treasure Detection</p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#milestone3">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/maze-img.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Milestone 3</h4>
              <p class="text-muted">Maze Algorithm</p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#milestone4">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/LEDrainbow.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Milestone 4</h4>
              <p class="text-muted">Maze Drawing and Done Signal</p>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 portfolio-item">
            <a class="portfolio-link" data-toggle="modal" href="#Final">
              <div class="portfolio-hover">
                <div class="portfolio-hover-content">
                  <i class="fa fa-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="img/portfolio/LEDrainbow.jpg" alt="">
            </a>
            <div class="portfolio-caption">
              <h4>Final Competition</h4>
              <p class="text-muted"></p>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Schedule -->
    <section id="schedule">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Schedule</h2>
            <h3 class="section-subheading text-muted">A timeline of our progress and meeting minutes</h3>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <ul class="timeline">
              <li>
                <div class="timeline-image">
                  <img class="rounded-circle img-fluid" src="img/about/notes2.jpg" alt=""> 
                </div>
                <div class="timeline-panel">
                  <div class="timeline-heading">
                    <h4>August/September 2017</h4>
                    <h4 class="subheading">Labs 1 & 2, Milestones 1 & 2</h4>
                  </div>
                  <div class="timeline-body">
                    <a class="portfolio-link" data-toggle="modal" href="#augustseptember">See Notes</a>
                  </div>
                </div>
              </li>
              <li class="timeline-inverted">
                <div class="timeline-image">
                  <img class="rounded-circle img-fluid" src="img/about/notes1.jpg" alt="">
                </div>
                <div class="timeline-panel">
                  <div class="timeline-heading">
                    <h4>October 2017</h4>
                    <h4 class="subheading">Labs 3 & 4, Milestone 3</h4>
                  </div>
                  <div class="timeline-body">
                    <a class="portfolio-link" data-toggle="modal" href="#october">See Notes</a>
                  </div>
                </div>
              </li>
              <li>
                <div class="timeline-image">
                  <img class="rounded-circle img-fluid" src="img/about/3.jpg" alt="">
                </div>
                <div class="timeline-panel">
                  <div class="timeline-heading">
                    <h4>November 2017</h4>
                    <h4 class="subheading">Milestones 3 & 4</h4>
                  </div>
                  <div class="timeline-body">
                    <a class="portfolio-link" data-toggle="modal" href="#november">See Notes</a>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-inline quicklinks">
              <li class="list-inline-item">
                <a href="#">Privacy Policy</a>
              </li>
              <li class="list-inline-item">
                <a href="#">Terms of Use</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <!-- Team Modals -->

    <!-- Modal 1 -->
    <div class="team-modal modal fade" id="teamModal1" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h2 class="text-uppercase">Project Name</h2>
                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/01-full.jpg" alt="">
                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                  <ul class="list-inline">
                    <li>Date: January 2017</li>
                    <li>Client: Threads</li>
                    <li>Category: Illustration</li>
                  </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Project</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lab Modals -->
    
    <!-- Contract -->
    <div class="portfolio-modal modal fade" id="Contract" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h1 id="team-contract">Team Contract</h1>
                  <p>ECE 3400, Fall 2017, Group 3</p>
                  <div align="left">
                    <h2 id="team-procedures">Team Procedures</h2>
                    <ul>
                    <li>This team will meet every Friday during open school hours from 11:15-12:05 in the ECE Lounge in Phillips Hall.
                    <ul>
                    <li>Additionally, members will attend the lab section on Mondays from 1:25-4:25.</li>
                    </ul></li>
                    <li>Any other team meetings will have a time and location agreed upon collectively in the group chat.
                    <ul>
                    <li>This can be suggested by the Team Lead or any other member.</li>
                    <li>On a bi-weekly basis, a WhenIsGood (http://whenisgood.net/) will be sent out to determine a meeting time if necessary.</li>
                    </ul></li>
                    <li>Team decisions will be made by striving for consensus; however, in the case consensus is not met, majority vote of present members will be used.</li>
                    <li>Preferred method of communication will be Slack. Channels and direct messages will be used according to delegated tasks.
                    <ul>
                    <li>If necessary, members can video into meetings.</li>
                    </ul></li>
                    <li>Meeting minutes will be taken by a member other than the Team Lead in the Slack #notes channel at every meeting.</li>
                    <li>At every meeting, members will report the status of their work including their accomplishments, work in progress, and future goals for the upcoming week.</li>
                    </ul>
                    <h2 id="team-expectations">Team Expectations</h2>
                    <h3 id="work-quality">Work Quality</h3>
                    <ul>
                    <li>Ask for help, preferably early, if you know you will not be able to meet a deadline or generally need help with something.</li>
                    <li>Expectations involve a fully functional robot and any additions, fun or functional, as time allows.</li>
                    <li>Class deadlines should be met, or very nearly met, 24 hours in advance.</li>
                    <li>Team-set deadlines should be met by the agreed-upon time with a less than a day of grace period if previously unknown circumstances arise.</li>
                    </ul>
                    <h3 id="team-participation">Team Participation</h3>
                    <ul>
                    <li>Show up to meetings.</li>
                    <li>Be honest about your limitations and other commitments.</li>
                    <li>If the workload seems unfairly distributed, it can be brought up in a team meeting or in the Slack group.</li>
                    </ul>
                    <h3 id="personal-accountability">Personal Accountability</h3>
                    <ul>
                    <li>Let other members know ahead of time if you will not be able to make a meeting.</li>
                    <li>Respond to communications in a timely manner (within 24 hours).</li>
                    </ul>
                    <h3 id="consequences-for-failing-to-follow-procedures-and-fulfill-expectations">Consequences for Failing to Follow Procedures and Fulfill Expectations</h3>
                    <ul>
                    <li>If an individual misses more than two consecutive meetings without justification, then the member must bring snacks for the next meeting.</li>
                    <li>If a member fails to meet a class deadline or consistently produces subpar work that must be re-done, the team will decide how to proceed however they reserve the right to notify the Professor/TAs of the skewed distribution of work and given circumstances.</li>
                    <li>Failure to adhere to the Team Contract will be open to discussion at team meetings, and further consequences may be considered.</li>
                    </ul>
                    <h2 id="team-leadership">Team Leadership</h2>
                    <ul>
                    <li>The team leader’s main focus is to organize and manage deadlines, meetings, etc.</li>
                    <li>Constructive criticism is not limited to team leaders. Team members should always be critiquing others’ work.</li>
                    <li>Team leaders will be:</li>
                    </ul>
                    <table border="1">
                    <thead>
                    <tr class="header">
                    <th>Date</th>
                    <th>Leader</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="odd">
                    <td>Sept 1st - Sept 19th</td>
                    <td>Amanda Trang</td>
                    </tr>
                    <tr class="even">
                    <td>Sept 20th - Oct 9th</td>
                    <td>Emmett Milliken</td>
                    </tr>
                    <tr class="odd">
                    <td>Oct 10th - Oct 29th</td>
                    <td>David Kim</td>
                    </tr>
                    <tr class="even">
                    <td>Oct 30th - Nov 17th</td>
                    <td>Dylan Machado</td>
                    </tr>
                    <tr class="odd">
                    <td>Nov 18th - Dec 5th</td>
                    <td>Sofya Calvin</td>
                    </tr>
                    </tbody>
                    </table>
                    <h2 id="signatures">Signatures</h2>
                    <p><em>I participated in formulating the standards, roles, and procedures as stated in this contract. I understand that I am obligated to abide by these terms and conditions. I understand that if I do not abide by these terms and conditions, I will suffer the consequences as stated in this contract.</em></p>
                    <table border="1">
                    <thead>
                    <tr class="header">
                    <th>Signature</th>
                    <th>Date</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="odd">
                    <td>Amanda Trang</td>
                    <td>09/01/2017</td>
                    </tr>
                    <tr class="even">
                    <td>David Kim</td>
                    <td>09/01/2017</td>
                    </tr>
                    <tr class="odd">
                    <td>Emmett Milliken</td>
                    <td>09/01/2017</td>
                    </tr>
                    <tr class="even">
                    <td>Dylan Machado</td>
                    <td>09/01/2017</td>
                    </tr>
                    <tr class="odd">
                    <td>Sofya Calvin</td>
                    <td>09/01/2017</td>
                    </tr>
                  </tbody>
                  </table>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Contract</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Ethics -->
    <div class="portfolio-modal modal fade" id="Ethics" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h1 id="the-ethics-of-robotics-in-elderly-caretaking">The Ethics of Robotics in Elderly Caretaking</h1>
                  <div align="left">
                    <p>Elder care is becoming a more prevalent issue as the elderly population increases, but the caregiver population stays constant. The solution the Japanese government is coming to is to apply advancing robot technology to assist the elderly. These robots are being to created to do a multitude of tasks, such as turning off lights, transforming into wheelchairs, lifting people, and simply providing company.</p>
                    <p>The stakeholder in this situation is the Japanese government: according to Business Insider, a third of the government’s budget is going towards the development of these robots, coined “carebots.” While European and American countries are not struggling with the same age imbalance Japan is, funds and research are also occurring in those regions. Other parties of note are the electronics corporations and organizations involved in developing carebots that will compete to have the most marketable bot–Honda, Panasonic, RIKEN, CT Asia Robotics, among countless others–as well as the International Organization for Standardization (ISO), who must continuously develop standards for human-robot interaction as the technology advances. Individual engineers will be involved in the direct research and development of the robots, constantly making decisions that will directly affect lives once the products are on the market. Finally, the consumer public will have the most direct impact. Families purchasing carebots will see the most immediate effects, whether that is improved elder care or dealing with technical issues and accidents. Less directly, nursing home businesses will have to deal with competition from non-human sources, and family culture could change drastically.</p>
                    <p>Under utilitarianism, the goal would be to maximize the happiness of all parties equally. Since robots have no way of showing emotion, this means making both the elderly and their respective families and caretakers happy. One could argue that having exclusively robots manage elder care would lead to the greatest amount of happiness among everyone, since seniors would (theoretically) be in good hands and their families would be able to focus on their own lives. However, it’s likely that the lack of human interaction would actually hurt seniors, meaning this would not lead to the most happiness for everyone. The best setup, therefore, is probably one where the elderly is taken care of by other people on occasion too. While there is less overall utility, since the caretaker has to use their time on someone else, the amount of total utility split between parties is much more equal.</p>
                    <p>It can be argued that human-human interaction is often seen as more virtuous than robot-human interaction. The robot-human interactions lack the personal and emotional relationship and bonding that comes with a human-human interaction. Therefore the idea of shifting senior care to robots can be seen as partially failing the virtue test. The shift into senior robot care would deprive the elders of what little human-human interactions they already have. However, it can also be argued that the senior robot care system was the most cost effective way to tackle the problem of the decreasing number of senior caregivers. Although the shift in elder care to robots may not be the ideal way that elders should be taken care of, it is the most cost effect solution to the problem that people are no longer stepping up to care for seniors. The robot care system does not go strongly against moral standards either, and therefore it can be concluded that it does not fail the virtue test.</p>
                    <p>If only robots are to care for the elderly, the system fails or passes the justice test depending on one’s views. If robots are not considered a being that carries a burden of work, then this passes the justice test. However, if they do carry the burdens of work, then having robots care for seniors fails the justice test because nobody else is doing their fair share of work. The solution would be to make a plan to distribute work equally among robots, workers, and family members so everyone contributes to serving the elderly. Under that system where everyone is pulling their weight, the justice system passes in all cases.</p>
                    <p>There are several economic challenges to consider with robots. Since this is still a relatively new technology undergoing development, there is a high cost associated with it. This high barrier of entry to the technology means only the wealthy would have access to these caretakers. Those less fortunate therefore cannot consider this an option for elder care. The only solution would be to offset the costs of these robots, possibly through government subsidization or third party assistance. In addition, most of the ethics tests suggest that the ideal balance in elder care would be some combination of human caretakers and robots. However, this means a consumer would have to pay twice for care, raising costs even more. Again, the only solution would be to somehow offset the total cost for care.</p>
                    <p>Historically, society has also been hesitant to accept new technology, especially from older generations. This could lead to people being afraid to use robots in elder care, even if they are competitively priced on the market. A simple mistake could lead to something as disastrous as death. To combat this, there needs to be as much transparency and communication about the technology as possible. Manufacturers would likely have to emphasize the safety of their products through demonstrations, tests, and more. There would also likely be a need for heavy regulation in this industry to calm the public’s fears. This would have to be maintained by the government to push safety and innovation among products. The downside of such a regulatory body would be the increased taxes from running it.</p>
                    <p>All in all, there are many aspects to consider in relation to treating elders with robotic caretakers. Although there are still issues with the technology, it has the potential to be revolutionary in the future if society is able to solve the ethical problems associated with it. On the whole, our group has faith that given an appropriate amount of research and regulation, this technology has the potential to ease and enhance thousands of lives and families. Assuming this ensues, it will then be largely up to the companies producing these robots to convince the general public of the numerous benefits.</p>
                    <ul class="list-inline">
                      <li>Sources</li>
                      <li><a href="url"> http://www.businessinsider.com/japan-developing-carebots-for-elderly-care-2015-11</a></li>
                      <li><a href="url">https://www.engadget.com/2017/08/29/robot-caregivers-are-saving-the-elderly-from-lives-of-loneliness/</a></li>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Ethics</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
                                          
    <!-- Lab 1 -->
    <div class="portfolio-modal modal fade" id="Lab1" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h1 id="lab-1-microcontrollers">Lab 1: Microcontrollers</h1>
                    <p>Team 1: Amanda Trang, Emmett Milliken</p>
                    <p>Team 2: David Kim, Dylan Machado, Sofya Calvin</p>
                    <h2 id="objective">Objective</h2>
                    <p>The goal of this lab was to introduce the concepts of the Arduino IDE as well as the Arduino Uno microcontroller itself. Additionally, we formed a basic structure for the robot and added a simple autonomous function.</p>
                    <h2 id="procedure">Procedure</h2>
                    <p>We used the Arduino IDE to program write and upload our code to the Uno. To install the Arduino IDE, go <a href="https://www.arduino.cc/en/Main/Software">here.</a></p>
                    <h3 id="blinking-an-internal-led">Blinking an internal LED</h3>
                    <p>To make the internal LED on the Arduino blink, we first set up the hardware as is outlined in the schematic below. It is important to have the 300 Ohm resistor in series with the potentiometer this will prevent too much current from being sourced to the pins.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Lab-1-Module-1.jpg" alt="Blinking and Internal LED Schematic">
                  <div align="left">
                    <p>In order to test whether or not our connection with the board was working, we used the example sketch, Blink (File&gt;Examples&gt;01.Basics&gt;Blink). After uploading the sketch to the board, the on-board LED toggled on and off once per second, verifying that our connection and board were working.</p>
<pre><code>void setup() {
  // initialize digital pin 13 as an output.
  pinMode(13, OUTPUT);
}

void loop() {
  digitalWrite(13, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);              // wait for a second
  digitalWrite(13, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);              // wait for a second
}</code></pre>
                    <h3 id="blinking-an-external-led">Blinking an external LED</h3>
                    <p>To make an external LED blink (as opposed to the one built into the Arduino), we had to modify the schematic to add in the external LED as shown below:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Lab-1-Module-2.jpg" alt="Blinking and External LED Schematic">
                  <div align="left">
                    <p>We then modified the Blink sketch to blink an external LED through a digital output pin. Since digital output pins on the Uno will stop working if they are used to source too much current, we added a 330 ohm resistor in series with an LED.</p>
<pre><code>void setup() {
  // initialize digital pin 12 as an output.
  pinMode(12, OUTPUT);
}

// the loop function runs over and over again forever
void loop() {
  digitalWrite(12, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);              // wait for a second
  digitalWrite(12, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);              // wait for a second
}</code></pre>
                    <h3 id="reading-the-value-of-a-potentiometer-via-the-serial-port">Reading the value of a potentiometer via the serial port</h3>
                    <p>The next step was to test out using analog inputs. We used a potentiometer and a resistor to make a variable voltage input to the analog A0 pin on the board. To see the value of the input in real time we used the serial monitor, which allows us to print a value from the board to the screen. To do this we added this to the code:</p>
<pre><code>Serial.println(voltage);</code></pre>
<p>When we varied the position of the potentiometer, we were able to vary the output value printed to the serial monitor.</p>
<pre><code>// Base code from https://www.arduino.cc/en/Tutorial/ReadAnalogVoltage
void setup() {
  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
}

void loop() {
  int sensorValue = analogRead(A0);
  float voltage = sensorValue * (5.0 / 1023.0);
  Serial.println(voltage);</code></pre>
                    <h3 id="map-the-value-of-the-potentiometer-to-the-led">Map the value of the potentiometer to the LED</h3>
                    <p>The Arduino Uno does not have any analog output pins, but the digital output pins that can do pulse width modulation (PWM) are able to approximate the effect of an analog output. This is done using a digital signal with varying duty cycle (the percentage of a cycle for which the output of a signal is high, and if this happens fast enough, it acts as though the voltage is the time average value of the signal. So the high voltage multiplied by the duty cycle is the effective output voltage.</p>
                    <p>We then used this analog output to power an LED so that we could see the effect. Because the analog input values range from 0 to 1023, and the analog output values range from 0 to 255, we multiplied the value read from the input by 255/1023 when feeding that value to the analog output function. Here is our code:</p>
<pre><code>void setup() {
  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
  pinMode(3,OUTPUT);
}

void loop() {
  // read the input on analog pin 0:
  int sensorValue = analogRead(A0);
  // Convert the analog reading (which goes from 0 - 1023) to a voltage (0 - 5V):
  float voltage = sensorValue * (5.0 / 1023.0);
  analogWrite(3,sensorValue/4);
  // print out the value you read:
  Serial.println(voltage);
}</code></pre>
                    <p>Using an oscilloscope, we checked the frequency of the signal and how it is affected by the potentiometer. This can be viewed in the following video:</p>
                  </div>  
                  <p><a href="https://youtu.be/wA2syqGHpBw?t=17"><img src="https://img.youtube.com/vi/Foq4yv9mEkM/0.jpg" alt="Potentiometer and LED video" /></a></p>
                  <div align="left">
                    <h3 id="map-the-value-of-the-potentiometer-to-the-servo">Map the value of the potentiometer to the servo</h3>
                    <p>To setup the servo, we again modified the LED setup, this time removing the LED component all together and replacing it with a servo motor and variable power supply which we held at 5V. The schematic is shown below:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Lab-1-Module-3.jpg" alt="Potentiometer and Servo Schematic">
                  <div align="left">
                    <p>We followed a method similar to mapping the potentiometer to the LED. Building off the code from the setup of the servos, we read the value of A0–our potentiometer value–and converted it to a value on a scale from 0-180, which we knew to be the range of the servos (from full reverse to full forward). We also printed the value to the Serial Monitor, just to ensure we were getting the correct values.</p>
<pre><code>#include &lt;Servo.h&gt;
Servo pin;

void setup() {
  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
  //pinMode(3,OUTPUT);
  pin.attach(9);
}

void loop() {
  // read the input on analog pin 0:
  int sensorValue = analogRead(A0);
 pin.write(sensorValue/5.68);
  // print out the value you read:
  Serial.println(sensorValue*180.0/1023.0);
}</code></pre>
                    <p>This code was a success, allowing us to set the servo’s speed and direction based on the potentiometer reading.</p>
                    <h3 id="assemble-your-robot">Assemble your robot</h3>
                    <p>The assembly portion of the robot was made difficult due to the range of components available. Many screws would not fit through the chassis, or would interfere with the servo due to length. After a series of guessing-and-checking different parts, we mounted two servos, two wheels, a ball caster, and the Arduino onto a chassis. We wired the servos similarly to the previous portion of the lab.</p>
                    <p>This was more time-consuming than difficult, especially with a limited amount of Allen wrenches and only a certain amount of tasks that could be done at one time.</p>
                    <h3 id="driving-your-robot-autonomously">Driving your robot autonomously</h3>
                    <p>After assembling our simple robot, we wrote a simple program to attempt to run the robot in a square formation. We had to manually recalibrate the servos, as writing the value 90 to either one did not result in it stopping. We initialized both servos (named servoL and servoR for left and right, respectively):</p>
<pre><code>#include &lt;Servo.h&gt;
Servo servoL;
Servo servoR;

void setup() {
  Serial.begin(9600);
  servoL.attach(9);
  servoR.attach(10);
  //pinMode(11, OUTPUT);
  //pinMode(12, OUTPUT);
}</code></pre>
                    <p>and wrote a forward() function as well as a right() function. Knowing that 0 would be “full reverse” and 180 was “full forward,” we initially set each servo to 180 for forward(). After attempting to run the program, we realized one of the servos was mounted backwards, with respect to the other, and then modified our code to write 0 to servoR.</p>
<pre><code>void forward(int msec) {
  servoL.write(180);
  servoR.write(0);
  //digitalWrite(11, HIGH);
  //digitalWrite(12, HIGH);
  delay(msec);
}

void right(int msec) {
  servoL.write(180);
  servoR.write(90);
  //digitalWrite(11, HIGH);
  //digitalWrite(12, LOW);
  delay(msec);
}</code></pre>
                    <p>We also added in two LEDs that flashed their respective colors to visually see whether the code was running “forward” or “right.” In reality, the robot went in a very questionable quadrilateral-like shape, as we did not have enough time to fine-tune the time values. Any code relating to the LEDs has been commented out due to an issue causing the servos to run incorrectly. If the LEDs are implemented in the future, we will debug this code.</p>
<pre><code>void loop() {
  forward(5000);
  right(2000);
  forward(5000);
  right(2000);
  forward(5000);
  right(2000);
  forward(5000);
}
</code></pre>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Lab 1</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lab 2 -->
    <div class="portfolio-modal modal fade" id="Lab2" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h1 id="lab-2-analog-circuitry-and-ffts">Lab 2: Analog Circuitry and FFTs</h1>
                  <div align="left">
                    <p>Acoustic team: David Kim, Dylan Machado, Emmett Milliken</p>
                    <p>Optical team: Sofya Calvin, Amanda Trang</p>
                    <h2 id="objective">Objective</h2>
                    <p>The goal of this lab was to get familiar with the microphone and the IR sensor that we would be adding to our robot. We did this by using the Open Music Labs Arduino FFT library to map the Fourier Transforms of the signals that the sensors were detecting. Additionally, we utilized op-amps to create filters and amplifiers for the audio and optical signals. In the future, these will be incorporated onto the robot to detect a 660Hz start signal as well as IR-emitting treasures throughout the map.</p>
                    <h2 id="procedure">Procedure</h2>
                    <p>We initially split into two teams: Acoustic and Optical. The Acoustic team (David, Dylan, Emmett) focused on the microphone circuit, while the Optical team (Sofya, Amanda) worked with the IR sensor. Each team was to do the Fourier analysis corresponding to their circuit. As we did not finish during our lab hours, much of the lab was completed with varying members of the team during open lab.</p>
                    <h3 id="fft-analysis">FFT analysis</h3>
                    <p>For both the acoustic and optical parts of this lab, fast fourier transforms (FFT) were used to find the frequency content of the sampled input signal from the sensors.</p>
                    <p>The FFT library takes in an analog signal, samples it, and calculates the frequency content. The maximum frequency that the fft can accurately detect is half of the sampling frequency.</p>
                    <p>The FFT takes in 256 samples taken at equally spaced intervals, and outputs 256 values that represent the frequency content of the input signal. The 256 output values are the calculated frequency content within certain bins, or range of frequencies. The FFT of a real signal is symmetric over zero, only half of the outputs are unique. This is why sets of 128 values are output to serial.</p>
                    <p>In order to visualize the data coming out of the arduino, we copied sets of the data from the serial window into Excel. We initially spent a fair bit of time trying to get MATLAB to display the frequency content in real time, but ended up not being very successful.</p>
                    <p>Our Excel graphs of the frequency content of our signals can be found later on this page.</p>
                    <h3 id="amplifiermicrophone-circuit">Amplifier/microphone circuit</h3>
                    <p>When initially setting up the microphone, we were somewhat confiused by the diagram given to us:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lab2_fig1.jpg" alt="Audio Circuit">
                  <div align="left">
                    <p>After reviewing the FFT results, we determined a bandpass filter would be ideal to distinguish the 660Hz tone from environmental noise. After a series of failed trials and many exasperating hours later (e.g. a incorrectly wired bandpass filter, two or three correctly wired filters with excessive gains, a broken microphone, a faulty Arduino pin, etc.), we ultimately settled for a low-pass filter and high-pass filter back-to-back.</p>
                    <p>For reference, here is a selection of a few graphs of our attempts at running the FFT through the failed bandpass filters.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/failed_attempts.jpg" alt="Failed Filters">
                  <div align="left">
                    <p>The following circuits are the filters we designed based on the gain, passbands, and stopbands we wanted. Using <a href="http://www.analog.com/designtools/en/filterwizard/">Filter Wizard</a>, we found the values for the components we would need.</p>
                    <p>Low-pass: </p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lowpass.jpg" alt="Low-pass Filter">
                  <div align="left">
                    <p>High-pass: </p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/highpass.jpg" alt="High-pass Filter">
                  <div align="left">
                    <p>As the LM358 is a dual op-amp, we were able to include both circuits using the same board. The final circuit that we ended up using for the audio prortion of this lab is shown in the image below where the output of the microphone was put into the input of the low pass filter and the output of the low pass filter was then put into the high pass filter and finally the output of the high pass filter was connected to a capacitor and then the analog port of the arduino. The implementation was as follows:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/mic_filtered.jpg" alt="Acoustic Final">
                  <div align="left">
                    <h3 id="hz-tone-detection">660Hz tone detection</h3>
                    <h4 id="before-filter">Before filter</h4>
                    <p>Once we had succeeded in detecting individual frequencies, we forcused on getting a better idea of the actual range.</p>
                    <p>The Arduino Uno runs on a 16MHz clock. The ADC uses a prescaling value in order to slow down that clock to 16MHz/(prescaling factor). Changing the prescaling factor therefore lets us change the sampling frequency. Through looking at the documentation for the ATmega chip (<a href="http://www.atmel.com/Images/Atmel-42735-8-bit-AVR-Microcontroller-ATmega328-328P_Datasheet.pdf">found here</a>), along with careful reading of the example code and Team Alpha’s website, we were able to figure out that we were using a prescaling factor of 32. This meant the clock for the ADC was running at 500kHz. The ATmega documentation says that an average ADC converstion takes 13 clock cycles to complete, so we would be sampling at around 38kHz. The size of each bin would then be around 150Hz. Our estimated bin size scale was about 146.666Hz, so they lined up fairly well.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lab2audiofreqspectrum.jpg" alt="Audio Spectrum">
                  <div align="left">
                    <h4 id="after-filter">After Filter</h4>
                    <h5 id="capacitor-vs-no-capacitor">Capacitor VS No Capacitor:</h5>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/660Hz(128)v1.jpg" alt="660Hz(128)v1">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/660Hz(128)v2.jpg" alt="660Hz(128)v2">
                  <div align="left">
                    <p>The Capacitor was added right before the output signal was sent into the Arduino in order to cut the DC offset. As seen in the graphs above the one on the left was the circuit with the capacitor and the graph on the right was the circuit without a capacitor.</p>
                    <h5 id="different-prescalers">Different Prescalers:</h5>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/660Hz(32).jpg" alt="660Hz(32)">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/660Hz(64).jpg" alt="660Hz(64)">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/660Hz(128)v2.jpg" alt="660Hz(128)v2">
                  <div align="left">
                    <p>After building and connecting the filters to our circuit we were able to discover how to use the prescalers properly. The prescalers were preset to 32 from this line of code in the setup portion <code>c   ADCSRA = 0xe5; // set the adc to free running mode</code> and this line of code from the loop portion</p>
<pre class="sourceCode c" id="cb1"><code class="sourceCode c"><div class="sourceLine" id="cb1-1" data-line-number="1"> ADCSRA = <span class="bn">0xf5</span>; <span class="co">// restart adc</span></div></code></pre>
                    <p>We were able to figure out that inorder to change the prescalers both the values needed to be changed and we changed the prescaler value to 128 by setting the ADCSRA like this: ```c ADCSRA = 0xe7; // set the adc to free running mode</p>
                    <p>ADCSRA = 0xf7; // restart adc ``` We also figured out that as the prescaler value increases, the resolution increases, but the total range of measurable frequencies decreases. Therefore the graph would look like it is shifting to the right as shown in the graphs above.</p>
                    <h5 id="different-frequencies">Different Frequencies:</h5>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/590Hz(128).jpg" alt="590Hz(128)2">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/730Hz(128).jpg" alt="730Hz(128)">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/660Hz(128)v1.jpg" alt="660Hz(128)v1">
                  <div align="left">
                    <p>The capacitor in our circuit cuts the DC offset and prevents the signal from going down below 0V so the negative signals would be read as almost square waves and this causes the multiple peaks after the initial peak in the graphs above.</p>
                    <h5 id="distinguish-660hz-from-590hz-and-730hz">Distinguish 660Hz from 590Hz and 730Hz</h5>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Combine_Audio(128).jpg" alt="Combine_Audio(128)">
                  <div align="left">
                    <p><em>Note: Actual bin numbers are the ones shown in the graph - 1, because we forgot to take into account that while graphing on excel the data started indexing at 2. So (660Hz: Bin 18; 590Hz: Bin 16; 730Hz: Bin 19)</em></p>
                    <p>Once again we calculated the our actual sampling rate as we did before and found that we would be sampling at around 9.4kHz when we had our prescaler at 128. Therefore the size of each bin would then be around 36.87Hz. This calculation fits the bin numbers that the three different signals in the graph above fell into. Also the graph shows that we were able to distinguish the three signals apart from each other.</p>
                    <h3 id="ir-sensor-circuit">IR sensor circuit</h3>
                    <p>The goal of the Optical team was to detect a 7kHz IR beacon through the Arduino and perform a Fourier analysis on the signal. We first created a simple circuit (shown below) to detect the IR-emitting treasure.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Lab2_Phototransistor.jpg" alt="Phototransistor Circuit">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/simple_IR.jpg" alt="Phototransistor Photo">
                  <div align="left">
                    <p>The operating principle of the phototransistor is that it allows more current to pass with the more light it receives; and, similarly, less current to pass with less light. We were able to test the functionality of this simple circuit by using the oscilloscope. The output voltage would correctly lower when the phototransistor was covered (i.e. exposed to no light).<p>
                    <p>We set the treasures by attaching the output to the oscilloscope and adjusting the amplitude and frequency. This is indicated by channel 2 in blue in the image below. By holding the treasure against the phototransistor, we could see the effect in the output on the oscilloscope, as seen on channel 1 in yellow. The Fourier analysis will be discussed in the following section.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/treasure_osc.jpg" alt="Treasure on Oscilloscope">
                  <div align="left">
                    <p>After initial testing, we determined that the signal received from the treasure was too weak at a realistic distance, and decided to implement an amplifier circuit. Using the LM358 op-amp and 1kΩ and 100Ω resistors, we created a simple non-inverting amplifier with a gain of approximately 10.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/noninvrt.jpg" alt="Non-inverting Amplifier">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/opamp.jpg" alt="LM358">
                  <div align="left">
                    <p>The actual implementation is as shown, with the treasure transmitting a signal at the top.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/treasure_filtered.jpg" alt="Phototransistor Filtered">
                  <div align="left">
                    <h3 id="ir-treasure-blinking-at-7khz-12khz-and-17khz">IR treasure blinking at 7kHz, 12kHz and 17kHz</h3>
                    <h4 id="before-amplifier">Before amplifier</h4>
                    <p>After determining the circuit could detect the IR signal successfully (before the amplifier was implemented), we ran the data through the FFT from the Open Music Labs library. We worked off the example code offered on their site. We used the preset ADC clock prescalar 32 which is shown in the following line:</p>
<pre class="sourceCode c" id="cb1"><code class="sourceCode c"><div class="sourceLine" id="cb1-1" data-line-number="1">  ADCSRA = <span class="bn">0xe5</span>; <span class="co">// set the adc to free running mode</span></div></code></pre>
                    <p>For this part of the lab we used the prescaler value of 32 because we were able to determine that if we used the value of 128 the signal at 17kHz would most likely be cutoff.</p>
                    <p>We printed the output of the FFT to the Serial monitor and were then able to copy the data into Excel for visualization. In this set of data, we have two sets of data for each frequency the treasure was set to.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolioIR_data_1.jpg" alt="IR Data (Unfiltered)">
                  <div align="left">
                    <h4 id="after-amplifier">After amplifier</h4>
                    <p>Without modifying the code, we continued to collect data with the amplifier implementation. We can distinctly see the difference between the normal and the amplified signals, as there is a significantly higher amount of frequencies within the desired bins. We will likely use a similar implementation on the robot in the future.</p>
                    <p>Our measurements showed us that the 7kHz signal was in bin 48, the 12 kHz signal was in bin 81 and the 17kHz signal was in bin 114. Our bin size was calculated to be about 150 Hz(<em>[(16 MHz / 32 prescalar) / 13 clock cylces] / 256 bins.</em>). According to the calculated bin size and the bins that the signals seem to be placed in, in the graph shown below, the graph seems to be accurately detecting the treasures at each different signals.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/Treasure(7kHz,12kHz,17kHz)" alt="IR Data (Amplified)">
                  <div align="left">
                    <p>The FFT code in its entirety can be viewed below: (We used the example code that was provided to us to do this lab. The only part of the code that we modified was setting the prescaler values as mentioned in the seperate parts of the audio and optical parts).</p>
<pre class="sourceCode c" id="cb1"><code class="sourceCode c"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">/*</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">fft_adc_serial.pde</span></div>
<div class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">guest openmusiclabs.com 7.7.14</span></div>
<div class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">example sketch for testing the fft library.</span></div>
<div class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">it takes in data on ADC0 (Analog0) and processes them</span></div>
<div class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">with the fft. the data is sent out over the serial</span></div>
<div class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">port at 115.2kb.</span></div>
<div class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">*/</span></div>
<div class="sourceLine" id="cb1-9" data-line-number="9"></div>
<div class="sourceLine" id="cb1-10" data-line-number="10"><span class="pp">#define LOG_OUT 1 </span><span class="co">// use the log output function</span></div>
<div class="sourceLine" id="cb1-11" data-line-number="11"><span class="pp">#define FFT_N 256 </span><span class="co">// set to 256 point fft</span></div>
<div class="sourceLine" id="cb1-12" data-line-number="12"></div>
<div class="sourceLine" id="cb1-13" data-line-number="13"><span class="pp">#include </span><span class="im">&lt;FFT.h&gt;</span><span class="pp"> </span><span class="co">// include the library</span></div>
<div class="sourceLine" id="cb1-14" data-line-number="14"></div>
<div class="sourceLine" id="cb1-15" data-line-number="15"><span class="dt">void</span> setup() {</div>
<div class="sourceLine" id="cb1-16" data-line-number="16">  Serial.begin(<span class="dv">9600</span>); <span class="co">// use the serial port</span></div>
<div class="sourceLine" id="cb1-17" data-line-number="17">  TIMSK0 = <span class="dv">0</span>; <span class="co">// turn off timer0 for lower jitter</span></div>
<div class="sourceLine" id="cb1-18" data-line-number="18">  ADCSRA = <span class="bn">0xe5</span>; <span class="co">// set the adc to free running mode</span></div>
<div class="sourceLine" id="cb1-19" data-line-number="19">  ADMUX = <span class="bn">0x40</span>; <span class="co">// use adc0</span></div>
<div class="sourceLine" id="cb1-20" data-line-number="20">  DIDR0 = <span class="bn">0x01</span>; <span class="co">// turn off the digital input for adc0</span></div>
<div class="sourceLine" id="cb1-21" data-line-number="21">}</div>
<div class="sourceLine" id="cb1-22" data-line-number="22"></div>
<div class="sourceLine" id="cb1-23" data-line-number="23"><span class="dt">void</span> loop() {</div>
<div class="sourceLine" id="cb1-24" data-line-number="24">  <span class="cf">while</span>(<span class="dv">1</span>) { <span class="co">// reduces jitter</span></div>
<div class="sourceLine" id="cb1-25" data-line-number="25">    cli();  <span class="co">// UDRE interrupt slows this way down on arduino1.0</span></div>
<div class="sourceLine" id="cb1-26" data-line-number="26">    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span> ; i &lt; <span class="dv">512</span> ; i += <span class="dv">2</span>) { <span class="co">// save 256 samples</span></div>
<div class="sourceLine" id="cb1-27" data-line-number="27">      <span class="cf">while</span>(!(ADCSRA &amp; <span class="bn">0x10</span>)); <span class="co">// wait for adc to be ready</span></div>
<div class="sourceLine" id="cb1-28" data-line-number="28">      ADCSRA = <span class="bn">0xf5</span>; <span class="co">// restart adc</span></div>
<div class="sourceLine" id="cb1-29" data-line-number="29">      byte m = ADCL; <span class="co">// fetch adc data</span></div>
<div class="sourceLine" id="cb1-30" data-line-number="30">      byte j = ADCH;</div>
<div class="sourceLine" id="cb1-31" data-line-number="31">      <span class="dt">int</span> k = (j &lt;&lt; <span class="dv">8</span>) | m; <span class="co">// form into an int</span></div>
<div class="sourceLine" id="cb1-32" data-line-number="32">      k -= <span class="bn">0x0200</span>; <span class="co">// form into a signed int</span></div>
<div class="sourceLine" id="cb1-33" data-line-number="33">      k &lt;&lt;= <span class="dv">6</span>; <span class="co">// form into a 16b signed int</span></div>
<div class="sourceLine" id="cb1-34" data-line-number="34">      fft_input[i] = k; <span class="co">// put real data into even bins</span></div>
<div class="sourceLine" id="cb1-35" data-line-number="35">      fft_input[i+<span class="dv">1</span>] = <span class="dv">0</span>; <span class="co">// set odd bins to 0</span></div>
<div class="sourceLine" id="cb1-36" data-line-number="36">    }</div>
<div class="sourceLine" id="cb1-37" data-line-number="37">    fft_window(); <span class="co">// window the data for better frequency response</span></div>
<div class="sourceLine" id="cb1-38" data-line-number="38">    fft_reorder(); <span class="co">// reorder the data before doing the fft</span></div>
<div class="sourceLine" id="cb1-39" data-line-number="39">    fft_run(); <span class="co">// process the data in the fft</span></div>
<div class="sourceLine" id="cb1-40" data-line-number="40">    fft_mag_log(); <span class="co">// take the output of the fft</span></div>
<div class="sourceLine" id="cb1-41" data-line-number="41">    sei();</div>
<div class="sourceLine" id="cb1-42" data-line-number="42">    Serial.println(<span class="st">&quot;start&quot;</span>);</div>
<div class="sourceLine" id="cb1-43" data-line-number="43">    <span class="cf">for</span> (byte i = <span class="dv">0</span> ; i &lt; FFT_N/<span class="dv">2</span> ; i++) { </div>
<div class="sourceLine" id="cb1-44" data-line-number="44">      Serial.println(fft_log_out[i]); <span class="co">// send out the data</span></div>
<div class="sourceLine" id="cb1-45" data-line-number="45">    }</div>
<div class="sourceLine" id="cb1-46" data-line-number="46">  }</div>
<div class="sourceLine" id="cb1-47" data-line-number="47">}</div></code></pre>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">               
                  <i class="fa fa-times"></i>
                  Close Lab 2</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lab 3 -->
    <div class="portfolio-modal modal fade" id="Lab3" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left"
                    <h1 id="lab-3-fpga-video-controller-and-sound-generation">Lab 3: FPGA Video Controller and Sound Generation</h1>
                    <p>Graphics team: Sofya Calvin, Amanda Trang, Dylan Machado</p>
                    <p>Audio team: Emmett Milliken, David Kim</p>
                    <h2 id="objective">Objective</h2>
                    <p>This lab has two main goals: one, to take external inputs from the Arduino to the FPGA and display them on a screen through VGA; and two, to generate a three-tone sound to a speaker via the 8-bit DAC. The graphics portion is intended to be a stepping stone toward a final goal of mapping the maze on-screen during competition, while the audio portion will eventually signal the completion of the maze.</p>
                    <h2 id="procedure">Procedure</h2>
                    <h3 id="graphics">Graphics</h3>
                    <h4 id="dac-on-vga-connectors">DAC on VGA connectors</h4>
                    <p>Before beginning our lab, we had to prepare our VGA connector with the proper resistors to display on our screen. The connector contains 8 inputs: 3 corresponding to red, 3 to green, and 2 to blue. The VGA would determine how much of each color is being displayed based on the voltages of the corresponding bits, up to 1 volt. For example, if the display were to show all red, then the 3 bits corresponding to red would add up to 1 volt. Furthermore, we made our voltage values for each bit to be half of the next bit’s. This meant that, in red for example, the smallest bit was valued at 0.143 volts, the next bit was valued at 0.286 volts, and the largest bit was 0.571 volts. These added together would add up to 1 volt, and allowed for varying amounts of color in between.</p>
                    <p>To achieve this on our VGA, we used a voltage divider. Below is an example of the voltage divider used for the bits corresponding to red. Bits 7, 6, and 5 all modify red on the VGA connector.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/VGA-voltage-divider.jpg" alt="VGA Voltage Divider">
                  <div align="left">
                    <p>Bit 7 represents where our largest voltage can come from. Bit 6 can then send half the voltage of bit 7 when activated, and bit 5 therefore sends the lowest voltage value when sending a signal. There is also an internal resistor of 50 ohms built into ground that we had to account for. It is pictured in the schematic above. From this, we then calculated the resistor values needed to build this setup on our VGA connector. By using the known voltages, and assuming that for any given resistor, when the voltage was high, the voltage for the other two were low, we were able to create three equations, with three variables to describe each of the voltage dividers. Since the red and green both had three bit inputs, they both used the same calculation while the blue calculations followed a similar process only with two variables and two equations. In the end, the calculations revealed approximate resistor values of 201.25, 402.4, and 805 Ohms for the red and green and 172.5 and 345 Ohms for the blue. We then picked resistor values as close to this as we could find and soldered the appropriate resistors onto the connector. We were then ready to display images on our screen!</p>
                    <h4 id="drawing-one-box">Drawing one box</h4>
                    <p>To change the color of the screen, we first designated in our code the pixel color we wanted.</p>
                    <p><code>assign PIXEL_COLOR = 8'b000_111_00; // Green</code></p>
                    <p>The program then looped through each pixel and changed all them to that one designated color. Since they were all one color, there was no need to create an array to keep track of each pixel. They were all the same.</p>
                    <p>To follow this up, we drew a single box, defined through ternary operators with the pixel value as the condition. In words, the follow code tells the pixels between 50-150 in the X and Y coordinates to be white; otherwise (i.e. the rest of the screen) should be red.</p>
<pre><code>assign PIXEL_COLOR = (PIXEL_COORD_X &gt; 50 &amp;&amp; PIXEL_COORD_X &lt; 150 &amp;&amp; PIXEL_COORD_Y &gt; 50 &amp;&amp; PIXEL_COORD_Y &lt; 150) ? 8&#39;b111_111_11 : 8&#39;b111_000_00;</code></pre>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/square.jpg" alt="Square">
                  <div align="left">
                    <h4 id="updating-array-dependent-on-inputs">Updating array dependent on inputs</h4>
                    <p>The next goal was to split the pixels up to display multiple colors on the screen. We knew defining each pixel would be inefficient and wasteful, and instead wanted to break the screen into specifically defined squares. To do this, we split up our box into groups via a series of case statements.</p>
<pre><code> always @ (posedge CLOCK_50) begin
            case(PIXEL_COORD_Y / 120)
            4&#39;d0 :                                              // row A
                case(PIXEL_COORD_X / 120)
                    4&#39;d0 : PIXEL_COLOR = 
                    8&#39;b111_000_00;
                    4&#39;d1 : PIXEL_COLOR = 8&#39;b111_001_00;
                    4&#39;d2 : PIXEL_COLOR = 8&#39;b111_010_00;
                    4&#39;d3 : PIXEL_COLOR = 8&#39;b111_100_00;
                    4&#39;d4 : PIXEL_COLOR = 8&#39;b111_110_00;
                    4&#39;d5 : PIXEL_COLOR = 8&#39;b111_111_01;
                    default: PIXEL_COLOR = 8&#39;b111_111_11;
                    endcase
...
 end</code></pre>
                    <p>With the case statements, we first divided our set of pixels into rows, from row A to row D. From there, we looked at the the remaining X coordinate values of the pixels and divided them into further columns. This gave us boxes that could each contain a unique color that we designated. The result was a colorful grid on our screen, seen below.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/colored_screen.jpg" alt="Color Grid">
                  <div align="left"
                    <h4 id="reading-external-inputs-to-fpga">Reading external inputs to FPGA</h4>
                    <p>With an objective of taking in at least two inputs from the Arduino, we took a simple route of outputting toggling digital signals from the Arduino on loop. Outputting to digital pins 12 and 13, we alternated between sending signals (0,0), (0,1), (1,0), and (1,1) with 1.5 second intervals. This would create the desired four states.</p>
<pre class="arduino"><code>void loop() { 
  // put your main code here, to run repeatedly:
  digitalWrite(pin1, LOW);
  digitalWrite(pin2, LOW);
  delay(1500);
  digitalWrite(pin1, LOW);
  digitalWrite(pin2, HIGH);
  delay(1500);
  digitalWrite(pin1, HIGH);
  digitalWrite(pin2, LOW);
  delay(1500);
  digitalWrite(pin1, HIGH);
  digitalWrite(pin2, HIGH);
  delay(1500);
}</code></pre>
                    <p>We also knew the Arduino runs on a 5V scale, whereas the FPGA uses 3.3V. We designed a simple voltage divider to pull down the voltage as follows:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/divider.jpg" alt="Voltage Divider">
                  <div align="left">
                    <p>Where Z1 (R1) was 240Ω, ad Z2 (R2) was 470Ω. These values were calculated using <a href="http://www.ohmslawcalculator.com/voltage-divider-calculator">Ohms Law Calculator.</a> We were not aware the Arduino had a built-in 3.3V pin, because the text had rubbed off. We connected the pins from the Arduino to this circuit, and the output of the voltage divider to the FPGA. The system looked as follows:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/circuit.jpg" alt="Circuit">
                  <div align="left">
                    <p>We wanted to ensure our signal was toggling as desired, so we hooked it up to the oscilloscope to view the signals from each pin. The oscilloscope showed us that it was toggling between 0 and 3.3V as expected:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/toggle.jpg" alt="Toggling Signal">
                  <div align="left">  
                    <p>In order to check if our signals were being read correctly, we wrote the LEDs on the FPGA to toggle in accordance with the two signals (i.e. LED1 turned on when switch_1 (from the Arduino) went high, and the same thing for LED2 and switch_2). The debugging process of this is described later in this report. The following is a quick clip of what the LEDs looked like with the toggling signal:</p>
                  </div>
                  <p><a href="http://www.youtube.com/watch?v=l2PiRnfkoK0"><img src="http://img.youtube.com/vi/l2PiRnfkoK0/0.jpg" alt="FPGA LEDs reading signals" /></a></p>
                  <div align="left>
                    <p>The left two blinking LEDs correspond to the changing signals, while the rightmost LED blinking was from the Lab 3 template code, in order to show it was running.</p>
                    <h4 id="mapping-external-inputs-on-screen">Mapping external inputs on screen</h4>
                    <p>Wanting to use these signals to change the colors on-screen, we returned to Quartus to modify the existing colored grid code. Out of simplicity, we modified the first square on the first two rows–turning them white when its respective signal went high.</p>
<pre class="sourceCode verilog" id="cb1"><code class="sourceCode verilog"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">always</span> @ (<span class="kw">posedge</span> CLOCK_<span class="dv">50</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2">    <span class="kw">case</span>(PIXEL_COORD_Y / <span class="dv">120</span>)</div>
<div class="sourceLine" id="cb1-3" data-line-number="3">        <span class="bn">4&#39;d0</span> :                                  <span class="co">// row A</span></div>
<div class="sourceLine" id="cb1-4" data-line-number="4">            <span class="kw">case</span>(PIXEL_COORD_X / <span class="dv">120</span>)</div>
<div class="sourceLine" id="cb1-5" data-line-number="5">                <span class="bn">4&#39;d0</span> : PIXEL_COLOR = (switch_<span class="dv">1</span>) ? <span class="bn">8&#39;b111_111_11</span>: <span class="bn">8&#39;b111_000_00</span>;</div>
<div class="sourceLine" id="cb1-6" data-line-number="6"></div>
<div class="sourceLine" id="cb1-7" data-line-number="7">...</div>
<div class="sourceLine" id="cb1-8" data-line-number="8"></div>
<div class="sourceLine" id="cb1-9" data-line-number="9">        <span class="bn">4&#39;d1</span> :                                  <span class="co">// row B</span></div>
<div class="sourceLine" id="cb1-10" data-line-number="10">            <span class="kw">case</span>(PIXEL_COORD_X / <span class="dv">120</span>)</div>
<div class="sourceLine" id="cb1-11" data-line-number="11">                <span class="bn">4&#39;d0</span> : PIXEL_COLOR = (switch_<span class="dv">2</span>) ? <span class="bn">8&#39;b111_111_11</span>: <span class="bn">8&#39;b111_111_00</span>;         </div></code></pre>
                    <p>This gave us four different states: neither square being white (0,0), one white with one colored (0,1) or (1,0), and both white (1,1). Here is a video of the toggling squares:</p>
                  </div>
                  <p><a href="http://www.youtube.com/watch?v=GtVpXq7ru7g"><img src="http://img.youtube.com/vi/GtVpXq7ru7g/0.jpg" alt="Two toggling squares" /></a></p>
                  <div align="left">
                    <p>We additionally wanted to have four different squares change colors, for the clear distinction of the four different states. We changed the square A1 (top left) to turn white on (0,0), B1 white on (0,1), C1 white on (1,0), and D1 (bottom left) on (1,1).</p>
<pre class="sourceCode verilog" id="cb2"><code class="sourceCode verilog"><div class="sourceLine" id="cb2-1" data-line-number="1"><span class="bn">4&#39;d0</span> :                                          <span class="co">// row A</span></div>
<div class="sourceLine" id="cb2-2" data-line-number="2">    <span class="kw">case</span>(PIXEL_COORD_X / <span class="dv">120</span>)</div>
<div class="sourceLine" id="cb2-3" data-line-number="3">        <span class="bn">4&#39;d0</span> : PIXEL_COLOR = (~switch_<span class="dv">1</span> &amp;&amp; ~switch_<span class="dv">2</span>) ? <span class="bn">8&#39;b111_111_11</span>: <span class="bn">8&#39;b111_000_00</span>;</div>
<div class="sourceLine" id="cb2-4" data-line-number="4"></div>
<div class="sourceLine" id="cb2-5" data-line-number="5">...</div>
<div class="sourceLine" id="cb2-6" data-line-number="6"></div>
<div class="sourceLine" id="cb2-7" data-line-number="7"><span class="bn">4&#39;d1</span> :                                          <span class="co">// row B</span></div>
<div class="sourceLine" id="cb2-8" data-line-number="8">    <span class="kw">case</span>(PIXEL_COORD_X / <span class="dv">120</span>)</div>
<div class="sourceLine" id="cb2-9" data-line-number="9">        <span class="bn">4&#39;d0</span> : PIXEL_COLOR = (~switch_<span class="dv">1</span> &amp;&amp; switch_<span class="dv">2</span>) ? <span class="bn">8&#39;b111_111_11</span>: <span class="bn">8&#39;b111_111_00</span>;                    </div>
<div class="sourceLine" id="cb2-10" data-line-number="10"></div>
<div class="sourceLine" id="cb2-11" data-line-number="11">...</div>
<div class="sourceLine" id="cb2-12" data-line-number="12"></div>
<div class="sourceLine" id="cb2-13" data-line-number="13"><span class="bn">4&#39;d2</span> :                                          <span class="co">// row C</span></div>
<div class="sourceLine" id="cb2-14" data-line-number="14">    <span class="kw">case</span>(PIXEL_COORD_X / <span class="dv">120</span>)</div>
<div class="sourceLine" id="cb2-15" data-line-number="15">        <span class="bn">4&#39;d0</span> : PIXEL_COLOR = (switch_<span class="dv">1</span> &amp;&amp; ~switch_<span class="dv">2</span>) ? <span class="bn">8&#39;b111_111_11</span>: <span class="bn">8&#39;b111_111_00</span>;</div>
<div class="sourceLine" id="cb2-16" data-line-number="16"></div>
<div class="sourceLine" id="cb2-17" data-line-number="17">...</div>
<div class="sourceLine" id="cb2-18" data-line-number="18"></div>
<div class="sourceLine" id="cb2-19" data-line-number="19"><span class="bn">4&#39;d3</span> :                                          <span class="co">// row D</span></div>
<div class="sourceLine" id="cb2-20" data-line-number="20">    <span class="kw">case</span>(PIXEL_COORD_X / <span class="dv">120</span>)</div>
<div class="sourceLine" id="cb2-21" data-line-number="21">        <span class="bn">4&#39;d0</span> : PIXEL_COLOR = (switch_<span class="dv">1</span> &amp;&amp; switch_<span class="dv">2</span>) ? <span class="bn">8&#39;b111_111_11</span>: <span class="bn">8&#39;b111_000_11</span>;</div></code></pre>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=NvecpIrvSZ8"><img src="http://img.youtube.com/vi/NvecpIrvSZ8/0.jpg" alt="Four toggling squares" /></a></p>
                  <div align="left">
                    <p>Debugging:</p>
                    <p>We had a few issues with using the correct pins on the FPGA. We first didn’t distinguish between GPIO_0 and GPIO_1, and then did not know the correct orientation of the pinout (i.e. where pin 1 was), then could not interface with the pin itself.</p>
                    <p>From the oscilloscope check, we were confident the signal was toggling as expected. Then, we tried debugging using the LEDs on the FPGA. After a series of seeing the LEDs constantly high for some arbitrary reason, we realized we were not, in fact, reading from GPIO_1 pins 15 and 17, but rather 5 and 7–the declaration of the “_1&quot; in “GPIO_15” was confusing.</p>
                    <p>After this, we switched to outputting on the screen. Our logic had been correct to change boxes on-screen.</p>
                    <h3 id="audio">Audio</h3>
                    <h4 id="connecting-the-fpga-output-to-the-the-speaker">Connecting the FPGA output to the the speaker</h4>
                    <p>The DAC was connected to the FPGA GPIO 1 pins for this part of the lab. We had the output from the sine wave output from the even numbered pins of GPIO_1 pins 8 through 22. Then the output of the DAC was connected to the speakers as shown in the pictures below.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/DE0_NANO.jpg" alt="FPGA">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/DAC_connection.jpg" alt="DAC">
                  <div align="left">
                    <p>To make sure that our connection was working properly we first wrote out the code that outputed a 660hz sine wave. The code that was used was similiar to the 440hz square wave code. However we created a new module in the project in verilog called SINE_ROM that would read in the sine values from a text file that we generated and store the values as a ROM. Then we created an instance of the module in the main file and connected the inputs and outputs the way we wanted it to be.</p>
<pre class="sourceCode verilog" id="cb1"><code class="sourceCode verilog"><div class="sourceLine" id="cb1-1" data-line-number="1">SINE_ROM sine  (</div>
<div class="sourceLine" id="cb1-2" data-line-number="2">        .addr(address),</div>
<div class="sourceLine" id="cb1-3" data-line-number="3">        .clk(CLOCK_<span class="dv">25</span>),</div>
<div class="sourceLine" id="cb1-4" data-line-number="4">        .q({GPIO_<span class="dv">1</span>_D[<span class="dv">8</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">10</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">12</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">14</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">16</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">18</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">20</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">22</span>]})</div>
<div class="sourceLine" id="cb1-5" data-line-number="5">           );</div></code></pre>
                    <p>Then we had a varable that represented the time, in clock cycles, it would wait before the next address access in the sine table.</p>
<pre class="sourceCode verilog" id="cb2"><code class="sourceCode verilog"><div class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">//660hz sine wave</span></div>
<div class="sourceLine" id="cb2-2" data-line-number="2"><span class="dt">localparam</span> CLKDIVIDER_<span class="dv">660</span> = <span class="dv">25000000</span>/<span class="dv">660</span>/<span class="dv">256</span>;</div></code></pre>
                    <p>The algorithm that we used was having a counter decrementing to 0, and when the time reached 0 the program would read the next value in the sine table. And the counter would be reset to the value in the local variable CLKDIVIDER_660. We had the counter decrementing every posedge of the CLK.</p>
<pre class="sourceCode verilog" id="cb3"><code class="sourceCode verilog"><div class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">/* 660 hz sine wave */</span>   </div>
<div class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">always</span> @ (<span class="kw">posedge</span> CLOCK_<span class="dv">25</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-3" data-line-number="3"> <span class="kw">if</span> (counter == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-4" data-line-number="4">   counter &lt;= CLKDIVIDER_<span class="dv">660</span> - <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb3-5" data-line-number="5">   <span class="kw">if</span> (address == <span class="dv">255</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-6" data-line-number="6">     address &lt;= <span class="dv">0</span>;</div>
<div class="sourceLine" id="cb3-7" data-line-number="7">   <span class="kw">end</span></div>
<div class="sourceLine" id="cb3-8" data-line-number="8">   <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-9" data-line-number="9">   address &lt;= address + <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb3-10" data-line-number="10">   <span class="kw">end</span></div>
<div class="sourceLine" id="cb3-11" data-line-number="11"> <span class="kw">end</span></div>
<div class="sourceLine" id="cb3-12" data-line-number="12"> <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-13" data-line-number="13">   counter &lt;= counter - <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb3-14" data-line-number="14"> <span class="kw">end</span></div>
<div class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw">end</span></div></code></pre>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=ROW6aC9uuBA"><img src="http://img.youtube.com/vi/ROW6aC9uuBA/0.jpg" alt="660hz sine wave" /></a></p>
                  <div align="left">
                    <h4 id="outputting-a-square-wave-to-the-speaker">Outputting a square wave to the speaker</h4>
                    <p>We first used the template code that was provided to us and followed the example that team alpha had on their website. The following is the code that we added to the DE0_NANO template.</p>
<pre class="sourceCode verilog" id="cb4"><code class="sourceCode verilog"><div class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">//time for 440hz square wave</span></div>
<div class="sourceLine" id="cb4-2" data-line-number="2"><span class="dt">localparam</span> CLKDIVIDER_<span class="dv">440</span> = <span class="dv">25000000</span>/<span class="dv">440</span>/<span class="dv">2</span>;</div>
<div class="sourceLine" id="cb4-3" data-line-number="3"></div>
<div class="sourceLine" id="cb4-4" data-line-number="4">...</div>
<div class="sourceLine" id="cb4-5" data-line-number="5">    </div>
<div class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">// Sound variables</span></div>
<div class="sourceLine" id="cb4-7" data-line-number="7"><span class="dt">reg</span> square_<span class="dv">440</span>;                       <span class="co">// 440 Hz square wave</span></div>
<div class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw">assign</span> GPIO_<span class="dv">0</span>_D[<span class="dv">2</span>] = square_<span class="dv">440</span>;</div>
<div class="sourceLine" id="cb4-9" data-line-number="9"></div>
<div class="sourceLine" id="cb4-10" data-line-number="10">...</div>
<div class="sourceLine" id="cb4-11" data-line-number="11">   </div>
<div class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">//Sound state machine (440hz square wave)</span></div>
<div class="sourceLine" id="cb4-13" data-line-number="13"><span class="kw">always</span> @ (<span class="kw">posedge</span> CLOCK_<span class="dv">25</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb4-14" data-line-number="14">  <span class="kw">if</span> (counter == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb4-15" data-line-number="15">    counter    &lt;= CLKDIVIDER_<span class="dv">440</span> - <span class="dv">1</span>; <span class="co">// reset clock</span></div>
<div class="sourceLine" id="cb4-16" data-line-number="16">    square_<span class="dv">440</span> &lt;= ~square_<span class="dv">440</span>;        <span class="co">// toggle the square pulse</span></div>
<div class="sourceLine" id="cb4-17" data-line-number="17">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb4-18" data-line-number="18">  <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb4-19" data-line-number="19">    counter    &lt;= counter - <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb4-20" data-line-number="20">    square_<span class="dv">440</span> &lt;= square_<span class="dv">440</span>;</div>
<div class="sourceLine" id="cb4-21" data-line-number="21">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb4-22" data-line-number="22"><span class="kw">end</span> </div></code></pre>
                    <p>after we ran the code on the DE0-NANO we connected the output to the oscilloscope and got the output that we were expecting.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/square_wave.jpg" alt="Square Wave">
                  <div align="left">
                    <h4 id="outputting-three-tones-via-dac">Outputting three tones via DAC</h4>
                    <p>For outputting three distinct tones, we took 2 different approaches. At first we thought that we were supposed to output 3 seperate frequencies at the same time. So we started working on that approach. However, it proved difficult because there was a problem with assigning the outputs of 3 different modules to the same pins that we used for the output that was set up (GPIO1 even pins 8 - 22). Then we were told that the task was to output 3 different frequencies, one at a time. So we fixed up our code to do this, with came out to be a lot simpler.</p>
                    <p>First we found some different frequencies that we wanted to output.</p>
<pre class="sourceCode verilog" id="cb1"><code class="sourceCode verilog"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">//notes in Dm11 chord</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2"><span class="dt">localparam</span> CLKDIVIDER_D = <span class="dv">25000000</span>/<span class="dv">294</span>/<span class="dv">256</span>;</div>
<div class="sourceLine" id="cb1-3" data-line-number="3"><span class="dt">localparam</span> CLKDIVIDER_F = <span class="dv">25000000</span>/<span class="dv">349</span>/<span class="dv">256</span>;</div>
<div class="sourceLine" id="cb1-4" data-line-number="4"><span class="dt">localparam</span> CLKDIVIDER_A = <span class="dv">25000000</span>/<span class="dv">440</span>/<span class="dv">256</span>;</div>
<div class="sourceLine" id="cb1-5" data-line-number="5"><span class="dt">localparam</span> CLKDIVIDER_C = <span class="dv">25000000</span>/<span class="dv">523</span>/<span class="dv">256</span>;</div>
<div class="sourceLine" id="cb1-6" data-line-number="6"><span class="dt">localparam</span> CLKDIVIDER_E = <span class="dv">25000000</span>/<span class="dv">660</span>/<span class="dv">256</span>;</div>
<div class="sourceLine" id="cb1-7" data-line-number="7"><span class="dt">localparam</span> CLKDIVIDER_G = <span class="dv">25000000</span>/<span class="dv">784</span>/<span class="dv">256</span>;</div></code></pre>
                    <p>Next we added 2 more variables one called duration to make sure that each frequency plays for one sec at a time and the other one called note to keep track of which of the three tones were currently playing.</p>
                    <p>Then we coded the whole program similiarly to the 660 hz sine output. However we had more conditions that were checking this time. One additional condition checked that the if the duration decremented down to 0 it would reset it to the value that is ONE_SEC and also it would change the tone that was currently playing. The second additional condition that we added was to check which note was currently playing and which note to change to.</p>
<pre class="sourceCode verilog" id="cb2"><code class="sourceCode verilog"><div class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">/* 3 distinct tones played for 1 sec at a time*/</span> </div>
<div class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">always</span> @ (<span class="kw">posedge</span> CLOCK_<span class="dv">25</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-3" data-line-number="3">  <span class="kw">if</span> (duration == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-4" data-line-number="4">    duration &lt;= ONE_SEC;</div>
<div class="sourceLine" id="cb2-5" data-line-number="5">    <span class="kw">if</span> (note == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-6" data-line-number="6">      count &lt;= CLKDIVIDER_C - <span class="bn">16&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-7" data-line-number="7">      note &lt;= <span class="dv">2</span>;</div>
<div class="sourceLine" id="cb2-8" data-line-number="8">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-9" data-line-number="9">    <span class="kw">else</span> <span class="kw">if</span> (note == <span class="dv">1</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-10" data-line-number="10">      count &lt;= CLKDIVIDER_G - <span class="bn">16&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-11" data-line-number="11">      note &lt;= note - <span class="bn">2&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-12" data-line-number="12">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-13" data-line-number="13">    <span class="kw">else</span> <span class="kw">if</span> (note == <span class="dv">2</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-14" data-line-number="14">      count &lt;= CLKDIVIDER_E - <span class="bn">16&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-15" data-line-number="15">      note &lt;= note - <span class="bn">2&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-16" data-line-number="16">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-17" data-line-number="17">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-18" data-line-number="18">  <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-19" data-line-number="19">    <span class="kw">if</span> (counter == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-20" data-line-number="20">      counter &lt;= count - <span class="bn">16&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-21" data-line-number="21">      <span class="kw">if</span> (address == <span class="dv">255</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-22" data-line-number="22">        address &lt;= <span class="bn">8&#39;b0</span>;</div>
<div class="sourceLine" id="cb2-23" data-line-number="23">      <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-24" data-line-number="24">      <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-25" data-line-number="25">        address &lt;= address + <span class="bn">8&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-26" data-line-number="26">      <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-27" data-line-number="27">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-28" data-line-number="28">    <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-29" data-line-number="29">      counter &lt;= counter - <span class="bn">16&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-30" data-line-number="30">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-31" data-line-number="31">    duration &lt;= duration - <span class="bn">25&#39;b1</span>;</div>
<div class="sourceLine" id="cb2-32" data-line-number="32">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-33" data-line-number="33"><span class="kw">end</span></div></code></pre>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=UuwHNSVr4Zk"><img src="http://img.youtube.com/vi/UuwHNSVr4Zk/0.jpg" alt="3 distinct tones" /></a></p>
                  <div align="left">
                    <p>After we finished this part of the lab we went back to our first approach where we would output 3 tones at the same time because it seemed interesting. With the help of the TA we figured out that we needed three seperate modules (one for each frequency) and we would have to have 3 temporary output reg for the 3 modules.</p>
                    <pre class="sourceCode verilog" id="cb1"><code class="sourceCode verilog"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">//multifrequency output</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2">SINE_ROM sine1 (</div>
<div class="sourceLine" id="cb1-3" data-line-number="3">        .addr(address1),</div>
<div class="sourceLine" id="cb1-4" data-line-number="4">        .clk(CLOCK_<span class="dv">25</span>),</div>
<div class="sourceLine" id="cb1-5" data-line-number="5">        .q(out1)</div>
<div class="sourceLine" id="cb1-6" data-line-number="6">           );</div>
<div class="sourceLine" id="cb1-7" data-line-number="7">     </div>
<div class="sourceLine" id="cb1-8" data-line-number="8">SINE_ROM sine2 (</div>
<div class="sourceLine" id="cb1-9" data-line-number="9">        .addr(address2),</div>
<div class="sourceLine" id="cb1-10" data-line-number="10">        .clk(CLOCK_<span class="dv">25</span>),</div>
<div class="sourceLine" id="cb1-11" data-line-number="11">        .q(out2)</div>
<div class="sourceLine" id="cb1-12" data-line-number="12">           );</div>
<div class="sourceLine" id="cb1-13" data-line-number="13"></div>
<div class="sourceLine" id="cb1-14" data-line-number="14">SINE_ROM sine3 (</div>
<div class="sourceLine" id="cb1-15" data-line-number="15">        .addr(address3),</div>
<div class="sourceLine" id="cb1-16" data-line-number="16">        .clk(CLOCK_<span class="dv">25</span>),</div>
<div class="sourceLine" id="cb1-17" data-line-number="17">        .q(out3)</div>
<div class="sourceLine" id="cb1-18" data-line-number="18">           )</div></code></pre>
                    <p>Then we would add up the 3 outputs of the seperate modules and divide it by 3 to take care of possible very high amplitude from the sum of the three outputs and then output it to the FPGA board.</p>
                    <p>The setup of the output was a little tricky at first but we figured out that we needed to assign the desired output pins:</p>
                    <pre class="sourceCode verilog" id="cb1"><code class="sourceCode verilog"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">//for multifrequency output</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2"><span class="dt">reg</span>[<span class="dv">7</span>:<span class="dv">0</span>]   final;</div>
<div class="sourceLine" id="cb1-3" data-line-number="3"></div>
<div class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">assign</span> {GPIO_<span class="dv">1</span>_D[<span class="dv">8</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">10</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">12</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">14</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">16</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">18</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">20</span>],GPIO_<span class="dv">1</span>_D[<span class="dv">22</span>]} = final;</div></code></pre>
                    <p>Then we had 3 seperate always blocks that were for each of the 3 tones we wanted. In these always blocks we had the code for going through the sine table. The only thing that would be different would be the desired tone variable.</p>
<pre class="sourceCode verilog" id="cb2"><code class="sourceCode verilog"><div class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">always</span> @ (<span class="kw">posedge</span> CLOCK_<span class="dv">25</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-2" data-line-number="2">  <span class="kw">if</span> (counter1 == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-3" data-line-number="3">    counter1 &lt;= CLKDIVIDER_E - <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb2-4" data-line-number="4">    <span class="kw">if</span> (address1 == <span class="dv">255</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-5" data-line-number="5">      address1 &lt;= <span class="dv">0</span>;</div>
<div class="sourceLine" id="cb2-6" data-line-number="6">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-7" data-line-number="7">    <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-8" data-line-number="8">      address1 &lt;= address1 + <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb2-9" data-line-number="9">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-10" data-line-number="10">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-11" data-line-number="11">  <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb2-12" data-line-number="12">    counter1 &lt;= counter1 - <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb2-13" data-line-number="13">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb2-14" data-line-number="14"><span class="kw">end</span></div></code></pre>
                    <p>Then this last always block would combine the outputs of the three seperate tones</p>
<pre class="sourceCode verilog" id="cb3"><code class="sourceCode verilog"><div class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">always</span> @ (<span class="kw">posedge</span> CLOCK_<span class="dv">25</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-2" data-line-number="2">  <span class="kw">if</span> (counter == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-3" data-line-number="3">    counter &lt;= CLKDIVIDER_G - <span class="bn">16&#39;b1</span>;</div>
<div class="sourceLine" id="cb3-4" data-line-number="4">    final &lt;= ((out1 + out2 + out3 )/<span class="dv">3</span>);</div>
<div class="sourceLine" id="cb3-5" data-line-number="5">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb3-6" data-line-number="6">  <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb3-7" data-line-number="7">    counter &lt;= counter - <span class="bn">16&#39;b1</span>;</div>
<div class="sourceLine" id="cb3-8" data-line-number="8">  <span class="kw">end</span></div>
<div class="sourceLine" id="cb3-9" data-line-number="9"><span class="kw">end</span></div></code></pre>
                    <p>Although, the outputting sound was not very clean this seemed to work to a certain extent. If we have more time we will try to output a more pleasent and cleaner sounding chord.</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=U1iU36uOmO8"><img src="http://img.youtube.com/vi/U1iU36uOmO8/0.jpg" alt="Multifreq output" /></a></p>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Lab 3</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lab 4 -->
    <div class="portfolio-modal modal fade" id="Lab4" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h1 id="lab-4-radio-communication-and-map-drawing">Lab 4: Radio Communication and Map Drawing</h1>
                    <p>Radio team: Sofya Calvin, Amanda Trang, Dylan Machado</p>
                    <p>FPGA team: Emmett Milliken, David Kim</p>
                    <h2 id="objective">Objective</h2>
                    <p>The objective of this lab was to implement radio communication between two Arduinos–which will later be implemented as radio communication between the robot and our base station. An additional component was integrating the work from Lab 3 to display updated maze data through VGA, requiring the states of the visited areas to be stored.</p>
                    <h2 id="procedure">Procedure</h2>
                    <h3 id="radio">Radio</h3>
                    <h4 id="wireless-sending-between-arduinos">Wireless sending between Arduinos</h4>
                    <p>The majority of the wireless communication was implemented through the template code provided in GettingStarted and the RF24 library. We first calculated the identifier numbers for our pipes using the <em>2(3D + N) + X</em> formula provided. As Day 0 and and Team 3, our identifier values came out to be 6 and 7.</p>
<pre><code>const uint64_t pipes[2] = { 0x0000000006LL, 0x0000000007LL };</code></pre>
                    <p>The message (by default, set to a timestamp) is put into radio.write() in order to send it to the other, receiving radio. This transmitter then waits for a response (i.e. acknowledgement) that the data had been received correctly. Additionally, the ACK bit is already implemented. To receive the data, while it is not “done,” radio.read() receives the data, which can be printed to the serial monitor.</p>
                    <p>We connected the two radios to the two Arduinos. Putting this program on both Arduinos and setting one to T(ransmit) and the other to R(eceive), we were able to view the timestamps of the messages on both serial monitors. Furthermore, we found through physical testing that the wireless communication had a range of around 10 feet. This will be important to know later on when we implement wireless communication on Brooklynn.</p>
                    <h4 id="sending-whole-maze">Sending whole maze</h4>
                    <p>Sending the whole maze wirelessly was a fairly minor addition to the GettingStarted.ino template code. We started by defining an arbitrary 2D maze array and sent the maze in a single payload:</p>
<pre><code>unsigned char maze[4][5] =
    {
      0, 0, 1, 2, 3,
      2, 2, 0, 1, 2,
      1, 1, 3, 2, 2,
      1, 1, 2, 0, 1,
    };

    // Send the maze
    printf(&quot;Now sending the maze...\n&quot;);
    bool ok = radio.write(maze, sizeof(maze));
    
    if (ok)
      printf(&quot;ok...&quot;);
    else
      printf(&quot;failed.\n\r&quot;);
    
    // Now, continue listening
    radio.startListening();</code></pre>
                    <p>Again, radio.write() does the heavy lifting of it, sending the data and assigning <em>ok</em> to true or false, printing the response accordingly (instsead of sending and receiving the timestamp). On the receiving end of things, we radio.read() the received data (called <em>got_maze</em>), printing it to the serial monitor by interating through the entire 2D array. The serial monitor looked as follows:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/full_maze.jpg" alt="Full Maze Serial Monitor">
                  <div align="left">         
<pre><code>unsigned char got_maze[5][5];
      bool done = false;
      while (!done)
      {
        // Fetch the payload.
        done = radio.read( got_maze, sizeof(got_maze) );
      
        // Print the maze
        for (int i=0; i &lt; 5; i++) {
          for (int j=0; j &lt; 5; j++) {
            printf(&quot;%d &quot;, got_maze[i][j]);
          }
          printf(&quot;\n&quot;);
        }
      
        // Delay just a little bit to let the other unit
        // make the transition to receiver
        delay(20);</code></pre>
                    <h4 id="sending-new-data">Sending new data</h4>
                    <p>Sending the whole maze on each loop was evidently not the most efficient way to do it–particularly in relation to power consumption, if this were a larger-scale project. Instead, we chose to send only new, changing data (i.e. new position, discovered treasure, etc.). By initializing x and y coordinate variables as well as a “state” variable (called <em>x_coord, y_coord</em> and <em>pos_data</em> respectively), we will be able to simple increment the desired values to display the robot’s position.</p>
                    <table border="1">
                    <thead>
                    <tr class="header">
                    <th></th>
                    <th>0</th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="odd">
                    <td>0</td>
                    <td>000 00 xx</td>
                    <td>001 00 xx</td>
                    <td>010 00 xx</td>
                    <td>100 001 xx</td>
                    <td>101 001 xx</td>
                    </tr>
                    <tr class="even">
                    <td>1</td>
                    <td>000 01 xx</td>
                    <td>001 01 xx</td>
                    <td>010 01 xx</td>
                    <td>100 010 xx</td>
                    <td>101 010 xx</td>
                    </tr>
                    <tr class="odd">
                    <td>2</td>
                    <td>000 10 xx</td>
                    <td>001 10 xx</td>
                    <td>010 10 xx</td>
                    <td>100 011 xx</td>
                    <td>101 011 xx</td>
                    </tr>
                    <tr class="even">
                    <td>3</td>
                    <td>000 11 xx</td>
                    <td>001 11 xx</td>
                    <td>010 11 xx</td>
                    <td>100 100 xx</td>
                    <td>101 100 xx</td>
                    </tr>
                    </tbody>
                    </table>
                    <p>This table is the binary representation of our 4x5 grid.</p>
                    <p>To send the new data, we created a new variable (called <em>new_data</em>) as the packet to send to the base station. This is a 7-bit piece of information, in which the first three bits display the x position, the next two are y position, and the last two are state data. This was chosen as the grid is 5 wide, requiring 3 bits to describe each, but only 4 tall–requiring 2 bits. For testing purposes, we arbitrarily made 4 states, which also required 2 bits. In order to display the data this way, we shift the x and y position data to fit next to the data. The debugging for the packet data is described later in this report.</p>
<pre><code>new_data = x_coord &lt;&lt; 4 | y_coord &lt;&lt; 2 | pos_data;
// x x x | y y | d d</code></pre>
                    <p>To actually send this data, we follow a similar process in sending the whole maze. We send the new data through radio.write() again.</p>
<pre><code>printf(&quot;Now sending new map data\n&quot;);
bool ok = radio.write( &amp;new_data, sizeof(unsigned char) );

if (ok)
  printf(&quot;ok... \n&quot;);
else
  printf(&quot;failed.\n\r&quot;);

// Now, continue listening
radio.startListening();</code></pre>
                    <p>The sending side of the Serial Monitor looks as follows:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/t_serial.jpg" alt="Transmitting New Data">
                  <div align="left"> 
                    <p>To verify the data being transmitted and received, we simply read the data back and parse the string back into bits–which may not be the most efficient way to do it, but made debugging much simpler by seeing the binary represenation of the packet instead of binary.</p>
<pre><code>String got_string = String(bitRead(got_data_t, 6)) + String(bitRead(got_data_t, 5)) + String(bitRead(got_data_t, 4)) + &quot; &quot; + String(bitRead(got_data_t, 3)) + String(bitRead(got_data_t, 2)) + &quot; &quot; + String(bitRead(got_data_t, 1)) + String(bitRead(got_data_t, 0));
// Spew it
Serial.println(&quot;Got response &quot; + got_string);</code></pre>
                    <p>On the receiving end, we similarly declare the variable of the data received (<em>got_data</em>) and verify if it was receieved. Using radio.read() we are able to take that data, print the result to the serial monitor. The Serial Monitor for this is as follows:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/r_serial.jpg" alt="Receiving New Data">
                  <div align="left"> 
                    <pre><code>unsigned char got_data;      
bool done = false;
while (!done) {
  // Fetch the payload, and see if this was the last one.
  done = radio.read( &amp;got_data, sizeof(unsigned char) );
  // Spew it
  // Print the received data in binary
  String bin_string = String(bitRead(got_data, 6)) + String(bitRead(got_data, 5)) + String(bitRead(got_data, 4)) + &quot; &quot; + String(bitRead(got_data, 3)) + String(bitRead(got_data, 2)) + &quot; &quot; + String(bitRead(got_data, 1)) + String(bitRead(got_data, 0));
  printf(&quot;Got payload... &quot;);
  Serial.println(bin_string);
  // Delay just a little bit to let the other unit
  // make the transition to receiver
  delay(20);</code></pre>
                    <p>For now, we are simulating exploration by methodically incrementing the data to travel the entire grid. The data is then sent to the FPGA.</p>
                    <p>Debugging:</p>
                    <p>We ran into some issues using the digital pins on the Arduino. We mistakenly attempted to utilize digital pins 0 and 1 as GPIO–however, they are TX and RX, meant for serial communication. The data transmission between the Arduino and FPGA became questionable due to our parallel implemenation. Without pins 0 and 1, we were forced to use a 7-bit packet (from pins 2-8).</p>
                    <h3 id="fpga">FPGA</h3>
                    <h4 id="displaying-full-4x5-grid">Displaying full 4x5 grid</h4>
                    <p>As in lab 3, we split the screen into rows and then columns using nested case statements. These nested case statements create the necessary 4x5 grid and allow us to set the pixel color within each square. Previously the color had been hard coded, but now is determined by data sent from the Ardiuno. In order to store the incoming data, we created a 4x5 array of 2-bit values. This array is updated every time the FPGA recieves information from the Arduino.</p>
                    <h4 id="arduino-and-fpga-maze-communication">Arduino and FPGA maze communication</h4>
                    <p>For lab 4 we decided to use parallel communication between the arduino and the FPGA. We used parallel communication because we decided to send only a 7 bit number for the radio communication part. So the arduino would recieve the 7 bit number and output each of the 7 bits in a different digital pin. We then put the digital out through a voltage divider because the FPGA GPIO pins can only handle 3.3 V. The circuit was connected as shown in the picture below.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lab4circuit.jpg" alt="Circuit">
                  <div align="left"> 
                    <p>We created a radio read module in verilog which simply mapped the first 3 bits as the column number and the next 2 bits as the row number and the last 2 bits as the state information. Then we used the code below to update our state machine depending on the signal that was being recieved.</p>
<pre class="sourceCode verilog" id="cb1"><code class="sourceCode verilog"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">for</span>(i = <span class="dv">0</span>; i &lt; <span class="dv">5</span>; i = i+<span class="dv">1</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2">    <span class="kw">for</span> (j = <span class="dv">0</span>; j &lt; <span class="dv">4</span>; j = j+<span class="dv">1</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb1-3" data-line-number="3">        <span class="kw">if</span> ((i+<span class="dv">5</span>*j) &lt;= grid_counter) maze_state[i][j] &lt;= radio_value;</div>
<div class="sourceLine" id="cb1-4" data-line-number="4">        <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb1-5" data-line-number="5">            <span class="kw">if</span> (radio_value == <span class="dv">0</span>) <span class="kw">begin</span></div>
<div class="sourceLine" id="cb1-6" data-line-number="6">                maze_state[i][j] &lt;= <span class="dv">3</span>;</div>
<div class="sourceLine" id="cb1-7" data-line-number="7">            <span class="kw">end</span></div>
<div class="sourceLine" id="cb1-8" data-line-number="8">            <span class="kw">else</span> <span class="kw">begin</span></div>
<div class="sourceLine" id="cb1-9" data-line-number="9">                maze_state[i][j] &lt;= radio_value - <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb1-10" data-line-number="10">            <span class="kw">end</span></div>
<div class="sourceLine" id="cb1-11" data-line-number="11">        <span class="kw">end</span></div>
<div class="sourceLine" id="cb1-12" data-line-number="12">    <span class="kw">end</span></div>
<div class="sourceLine" id="cb1-13" data-line-number="13"><span class="kw">end</span></div></code></pre>
                    <p>Then we displayed the map as we did in Lab 3 using the case statements and the VGA driver.</p>
                    <h4 id="displaying-exploration">Displaying exploration</h4>
                  </div
                  <p><a href="http://www.youtube.com/watch?v=QG6HxMM3Pq4"><img src="http://img.youtube.com/vi/QG6HxMM3Pq4/0.jpg" alt="Displaying current location" /></a></p>
                  <p><a href="http://www.youtube.com/watch?v=UZrElPKMoSs"><img src="http://img.youtube.com/vi/UZrElPKMoSs/0.jpg" alt="Old distinguishing visited sites" /></a></p>
                  <p><a href="https://www.youtube.com/watch?v=ltDu13pREOY"><img src="http://img.youtube.com/vi/ltDu13pREOY/0.jpg" alt="NEW distinguishing visited sites" /></a></p>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Lab 4</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Milestones -->
    <div class="portfolio-modal modal fade" id="milestone1" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h1 id="milestone-1">Milestone 1</h1>
                      <p>For Milestone one, our team was challenged to create a robot which had the ability to follow a black line using sensors, as well as complete a figure 8 motion when placed on a grid. This required an in depth analysis of mechanics, hardware, and software.</p>
                      <h2 id="following-a-line">Following a Line</h2>
                      <p>For the first part of the milestone, we had to figure out how to make Brooklynn follow a line. We determined that the best way to approach this was to use sensors to read and track the black line as she followed it. This meant we were faced with two challenges: the placement and usage of sensors to detect the line, and the act of remaining on the line and following it as she moved.</p>
                      <h3 id="hardware">Hardware</h3>
                      <p>The first challenge in designing Brooklynn from scratch was to make her mobile. We decided that we would start off using the servos as motors and eventually, if we see it to be a problem, will consider swapping these out for more precise and controllable motors. To build Brooklynn was fairly straight forward: we attached the servos to a set of wheels, which were then secured to a plastic base with a third leg for support. On top of the base, we attached an Arduino Uno and circuit board for all of the wiring and programming. Finally, we attached two light sensors on the front of Brooklynn to help with guiding her.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Bacardi1Month.jpg" alt="Initial Setup">
                  <div align="left">
                    <p>To make Brooklynn follow a line, we relied on the values reported on the light sensors in (almost) real time. When the value read less than ~900, this indicated the sensor was over white area. When the value read greater than ~950, this indicated the sensor was over black area. At first we left a little space between the two sensors to give Brooklynn a wide range of “vision”. However, after running her in a trial round, we realized that she was correcting her motion too much and wiggling around the line instead of following it directly. To fix this, we moved the sensors closer together so that once she corrected her motion, she would stay on the line and not continue to wiggle.</p>
                    <p>As far as power sources were concerned, we used a typical phone charger to power the servos and a regular 9V battery to power the Arduino. From the Arduino, we used the 5V output as a power source for the light sensors. The remaining wiring involved connecting the hardware to ground, as well as connecting the servos to Arduino outputs and the servos to Arduino inputs.</p>
                    <h3 id="software">Software</h3>
                    <p>To make Brooklynn follow a line, we coded a way for her to utilize the two center sensors in front. First, we obtained data from the sensors to determine the values of white and black. From there, we created an algorithm represented by this pseudocode:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/linefollow.jpg" alt="Line Following Code">
                  <div align="left"> 
                    <p>With this, if one sensor went off of the line, Brooklynn would shift and correct herself to have both of her middle sensors over the line again.</p>
                    <p>The full code can be found at the bottom of this page.</p>
                    <h3 id="results">Results</h3>
                  </div>
                  <p><a href="http://www.youtube.com/watch?v=RP49caLh4oo"><img src="http://img.youtube.com/vi/RP49caLh4oo/0.jpg" alt="Line Following - Before" /></a></p>                                                                                               
                  <div align="left">
                    <p>The video above shows Brooklynn in action. She correctly follows a line, and corrects herself as she moves. However, we noticed that she had issues with remaining in a straight line, and felt that the turns were too jolting and unnecessarily slowed her down. It turned out that we initially failed to have a common ground for our servos, which resulted in them moving at different speeds. We also decided to have Brooklynn use only one wheel at a time when adjusting so that she was always moving forward on a line, instead of pivoting to adjust. The final iteration can be seen below.</p>
                  </div>
                  <p><a href="http://www.youtube.com/watch?v=3n7LCLbF0UE"><img src="http://img.youtube.com/vi/3n7LCLbF0UE/0.jpg" alt="Line Following - After" /></a></p>
                  <div align="left">
                    <p>With the first part done, we were ready to move on to the next step.</p>
                    <h2 id="figure-8">Figure 8</h2>
                    <p>For the figure 8, we faced several more challenges. Brooklynn needed to follow a line, but she also needed to turn at and cross specific junctions. To do this, we needed her to determine where these junctions were, and how to act at these junctions.</p>
                    <h3 id="hardware">Hardware</h3>
                    <p>To modify Brooklynn to move in a figure 8 motion, we decided to add two more sensors to her. The initial two that we had placed on her functioned primarily to keep her following the line. The additional two sensors we added were used solely to detect the intersections. To do this, we made sure to place them towards the sides of Brooklynn so that they would not detect the line that she was following, but would detect the intersections. This was crutial in developing the code to perform this task.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Bacardi2Months.jpg" alt="Sensor Setup">
                  <div align="left"> 
                    <p>The final hardware wiring for Milestone 1 is depicted by the following schematic:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/schematic1.jpg" alt="Milestone 1 Schematic">
                  <div align="left"> 
                    <h3 id="software">Software</h3>
                    <p>The first task in coding our figure 8 program was implementing our line following algorithm. After that, we needed to tell Brooklynn when she reached a junction, and what to do. Through the outer sensors, we were able to tell her when a “new action” was to be taken. She would then follow a loop of commands to determine whether that action was a turn or driving through an intersection.</p>
                    <p>For our turns, we first tried using an algorithm similar to this:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/figure81st.jpg" alt="Figure 8 - 1st Attempt">
                  <div align="left">  
                    <p>However, this proved to be unreliable. Brooklynn would often begin turning and not complete the turn, or not turn at all. To fix this issue, we changed our code to implement a delay before the sensors would read new values. As a result, Brooklynn was able to respond much more reliably at intersections.<p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/figure8FINAL.png" alt="Figure 8 - Final Attempt">
                  <div align="left">    
                    <p>The entire code can be found at the bottom of the page</p>
                    <h3 id="results">Results</h3>
                  </div>
                  <p><a href="http://www.youtube.com/watch?v=FGEi17X3DoE"><img src="http://img.youtube.com/vi/FGEi17X3DoE/0.jpg" alt="Figure 8 - Before" /></a></p>
                  <div align="left"> 
                    <p>The video above shows our working, but unoptimized figure 8 build. Eventually, we changed our turns to use both wheels (the outer wheel moves faster than the inner wheel to keep the turn sharp but not on a pivot) as well as moving our outer junction-detecting sensors back to compensate for quicker, sharper turns. Below is a video of our final implementation.</p>
                  </div>
                  <p><a href="http://www.youtube.com/watch?v=lCFXg24FKVM"><img src="http://img.youtube.com/vi/lCFXg24FKVM/0.jpg" alt="Figure 8 - After" /></a></p>
                  <div align="left"> 
                    <h3 id="line-following-code">Line Following Code</h3>
                    <pre class="sourceCode c" id="cb1"><code class="sourceCode c"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="pp">#include </span><span class="im">&lt;Servo.h&gt;</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2"></div>
<div class="sourceLine" id="cb1-3" data-line-number="3"></div>
<div class="sourceLine" id="cb1-4" data-line-number="4">Servo leftservo;</div>
<div class="sourceLine" id="cb1-5" data-line-number="5">Servo rightservo;</div>
<div class="sourceLine" id="cb1-6" data-line-number="6"><span class="dt">void</span> setup() {</div>
<div class="sourceLine" id="cb1-7" data-line-number="7">  <span class="co">// initialize serial communication at 9600 bits per second:</span></div>
<div class="sourceLine" id="cb1-8" data-line-number="8">  Serial.begin(<span class="dv">9600</span>);</div>
<div class="sourceLine" id="cb1-9" data-line-number="9">  pinMode(<span class="dv">9</span>,OUTPUT);</div>
<div class="sourceLine" id="cb1-10" data-line-number="10">  pinMode(<span class="dv">10</span>,OUTPUT);</div>
<div class="sourceLine" id="cb1-11" data-line-number="11">  </div>
<div class="sourceLine" id="cb1-12" data-line-number="12">  leftservo.attach(<span class="dv">9</span>);</div>
<div class="sourceLine" id="cb1-13" data-line-number="13">  rightservo.attach(<span class="dv">10</span>);</div>
<div class="sourceLine" id="cb1-14" data-line-number="14"></div>
<div class="sourceLine" id="cb1-15" data-line-number="15">  </div>
<div class="sourceLine" id="cb1-16" data-line-number="16">}</div>
<div class="sourceLine" id="cb1-17" data-line-number="17"></div>
<div class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">// the loop routine runs over and over again forever:</span></div>
<div class="sourceLine" id="cb1-19" data-line-number="19"><span class="dt">void</span> loop() {</div>
<div class="sourceLine" id="cb1-20" data-line-number="20">  <span class="co">// read the input on analog pin 0:</span></div>
<div class="sourceLine" id="cb1-21" data-line-number="21">  <span class="dt">int</span> sen1 = analogRead(A0);</div>
<div class="sourceLine" id="cb1-22" data-line-number="22">  <span class="dt">int</span> sen2 = analogRead(A1);</div>
<div class="sourceLine" id="cb1-23" data-line-number="23"> <span class="co">/*Serial.print(sen1); //</span></div>
<div class="sourceLine" id="cb1-24" data-line-number="24"><span class="co"> Serial.print(F(&quot;  &quot;));</span></div>
<div class="sourceLine" id="cb1-25" data-line-number="25"><span class="co"> Serial.println(sen2);*/</span></div>
<div class="sourceLine" id="cb1-26" data-line-number="26"></div>
<div class="sourceLine" id="cb1-27" data-line-number="27"></div>
<div class="sourceLine" id="cb1-28" data-line-number="28"> <span class="cf">if</span> (abs(sen1-sen2)&lt;<span class="dv">75</span>){</div>
<div class="sourceLine" id="cb1-29" data-line-number="29"> leftservo.write(<span class="dv">180</span>);</div>
<div class="sourceLine" id="cb1-30" data-line-number="30"> rightservo.write(<span class="dv">0</span>);</div>
<div class="sourceLine" id="cb1-31" data-line-number="31"> }</div>
<div class="sourceLine" id="cb1-32" data-line-number="32"> <span class="cf">else</span> <span class="cf">if</span> (sen1&gt;sen2){ <span class="co">//tilted to the right; right sensor senses white</span></div>
<div class="sourceLine" id="cb1-33" data-line-number="33"> leftservo.write(<span class="dv">90</span>);</div>
<div class="sourceLine" id="cb1-34" data-line-number="34"> rightservo.write(<span class="dv">0</span>);</div>
<div class="sourceLine" id="cb1-35" data-line-number="35"> }</div>
<div class="sourceLine" id="cb1-36" data-line-number="36"> <span class="cf">else</span> <span class="cf">if</span> (sen2&gt;sen1){ <span class="co">//tilted to the left; left sensor senses white</span></div>
<div class="sourceLine" id="cb1-37" data-line-number="37">  leftservo.write(<span class="dv">180</span>);</div>
<div class="sourceLine" id="cb1-38" data-line-number="38">  rightservo.write(<span class="dv">90</span>);</div>
<div class="sourceLine" id="cb1-39" data-line-number="39"> }</div>
<div class="sourceLine" id="cb1-40" data-line-number="40"> </div>
<div class="sourceLine" id="cb1-41" data-line-number="41">  </div>
<div class="sourceLine" id="cb1-42" data-line-number="42">}</div></code></pre>
                    <p> ### Figure 8 Code</p>
<pre class="sourceCode c" id="cb1"><code class="sourceCode c"><div class="sourceLine" id="cb1-1" data-line-number="1"><span class="pp">#include </span><span class="im">&lt;Servo.h&gt;</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2"><span class="dt">int</span> rightTurn;</div>
<div class="sourceLine" id="cb1-3" data-line-number="3"><span class="dt">int</span> leftTurn;</div>
<div class="sourceLine" id="cb1-4" data-line-number="4"></div>
<div class="sourceLine" id="cb1-5" data-line-number="5"><span class="dt">int</span> inLeft;</div>
<div class="sourceLine" id="cb1-6" data-line-number="6"><span class="dt">int</span> inRight;</div>
<div class="sourceLine" id="cb1-7" data-line-number="7"><span class="dt">int</span> outLeft; </div>
<div class="sourceLine" id="cb1-8" data-line-number="8"><span class="dt">int</span> outRight;</div>
<div class="sourceLine" id="cb1-9" data-line-number="9"><span class="dt">int</span> stepCounter;</div>
<div class="sourceLine" id="cb1-10" data-line-number="10"></div>
<div class="sourceLine" id="cb1-11" data-line-number="11">Servo leftservo;</div>
<div class="sourceLine" id="cb1-12" data-line-number="12">Servo rightservo;</div>
<div class="sourceLine" id="cb1-13" data-line-number="13"></div>
<div class="sourceLine" id="cb1-14" data-line-number="14"><span class="dt">void</span> setup() {</div>
<div class="sourceLine" id="cb1-15" data-line-number="15">  <span class="co">// initialize serial communication at 9600 bits per second:</span></div>
<div class="sourceLine" id="cb1-16" data-line-number="16">  Serial.begin(<span class="dv">9600</span>);</div>
<div class="sourceLine" id="cb1-17" data-line-number="17">  leftservo.attach(<span class="dv">9</span>);</div>
<div class="sourceLine" id="cb1-18" data-line-number="18">  rightservo.attach(<span class="dv">10</span>);</div>
<div class="sourceLine" id="cb1-19" data-line-number="19"></div>
<div class="sourceLine" id="cb1-20" data-line-number="20">  rightTurn = <span class="dv">0</span>;</div>
<div class="sourceLine" id="cb1-21" data-line-number="21">  leftTurn = <span class="dv">0</span>;</div>
<div class="sourceLine" id="cb1-22" data-line-number="22">  stepCounter = <span class="dv">1</span>;</div>
<div class="sourceLine" id="cb1-23" data-line-number="23">  </div>
<div class="sourceLine" id="cb1-24" data-line-number="24">}</div>
<div class="sourceLine" id="cb1-25" data-line-number="25"></div>
<div class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">// the loop routine runs over and over again forever:</span></div>
<div class="sourceLine" id="cb1-27" data-line-number="27"><span class="dt">void</span> loop() {</div>
<div class="sourceLine" id="cb1-28" data-line-number="28">  </div>
<div class="sourceLine" id="cb1-29" data-line-number="29">  <span class="co">// read the input on analog pin 0:</span></div>
<div class="sourceLine" id="cb1-30" data-line-number="30">  </div>
<div class="sourceLine" id="cb1-31" data-line-number="31">  <span class="co">//light sensors</span></div>
<div class="sourceLine" id="cb1-32" data-line-number="32">  <span class="co">//(&gt;950 : black line ; &lt;900 : white space)</span></div>
<div class="sourceLine" id="cb1-33" data-line-number="33">  readSensor();</div>
<div class="sourceLine" id="cb1-34" data-line-number="34">  </div>
<div class="sourceLine" id="cb1-35" data-line-number="35">  <span class="co">// --------------</span></div>
<div class="sourceLine" id="cb1-36" data-line-number="36">  <span class="co">// LINE FOLLOWING start</span></div>
<div class="sourceLine" id="cb1-37" data-line-number="37">  <span class="co">// --------------</span></div>
<div class="sourceLine" id="cb1-38" data-line-number="38">  <span class="cf">while</span> (outLeft &lt; <span class="dv">900</span> || outRight &lt; <span class="dv">900</span>){ <span class="co">//while both outer sensors see white</span></div>
<div class="sourceLine" id="cb1-39" data-line-number="39">    readSensor();</div>
<div class="sourceLine" id="cb1-40" data-line-number="40">    </div>
<div class="sourceLine" id="cb1-41" data-line-number="41">    <span class="cf">if</span> (abs(inLeft-inRight)&lt;<span class="dv">70</span>){ <span class="co">//if inner are similar</span></div>
<div class="sourceLine" id="cb1-42" data-line-number="42">      forward();</div>
<div class="sourceLine" id="cb1-43" data-line-number="43">      </div>
<div class="sourceLine" id="cb1-44" data-line-number="44">    }</div>
<div class="sourceLine" id="cb1-45" data-line-number="45">    <span class="cf">else</span> <span class="cf">if</span> (inLeft&gt;inRight){ <span class="co">//if tilted left, correct</span></div>
<div class="sourceLine" id="cb1-46" data-line-number="46">       leftservo.write(<span class="dv">90</span>);</div>
<div class="sourceLine" id="cb1-47" data-line-number="47">       rightservo.write(<span class="dv">0</span>);</div>
<div class="sourceLine" id="cb1-48" data-line-number="48">    }</div>
<div class="sourceLine" id="cb1-49" data-line-number="49">    <span class="cf">else</span> <span class="cf">if</span> (inRight&gt;inLeft){ <span class="co">//if tilted right</span></div>
<div class="sourceLine" id="cb1-50" data-line-number="50">      leftservo.write(<span class="dv">180</span>);</div>
<div class="sourceLine" id="cb1-51" data-line-number="51">       rightservo.write(<span class="dv">90</span>);</div>
<div class="sourceLine" id="cb1-52" data-line-number="52">    } </div>
<div class="sourceLine" id="cb1-53" data-line-number="53"></div>
<div class="sourceLine" id="cb1-54" data-line-number="54">    readSensor();</div>
<div class="sourceLine" id="cb1-55" data-line-number="55">  }</div>
<div class="sourceLine" id="cb1-56" data-line-number="56"></div>
<div class="sourceLine" id="cb1-57" data-line-number="57">  stop();</div>
<div class="sourceLine" id="cb1-58" data-line-number="58"> <span class="co">//-------------</span></div>
<div class="sourceLine" id="cb1-59" data-line-number="59"> <span class="co">//end line follow section</span></div>
<div class="sourceLine" id="cb1-60" data-line-number="60"> <span class="co">//-------------</span></div>
<div class="sourceLine" id="cb1-61" data-line-number="61"></div>
<div class="sourceLine" id="cb1-62" data-line-number="62"> </div>
<div class="sourceLine" id="cb1-63" data-line-number="63"><span class="co">//--------------</span></div>
<div class="sourceLine" id="cb1-64" data-line-number="64"><span class="co">//steps when intersection is encountered section, start</span></div>
<div class="sourceLine" id="cb1-65" data-line-number="65"><span class="co">//--------------</span></div>
<div class="sourceLine" id="cb1-66" data-line-number="66">  <span class="cf">switch</span>(stepCounter){</div>
<div class="sourceLine" id="cb1-67" data-line-number="67">    <span class="cf">case</span> <span class="dv">1</span>:<span class="co">//for first 3 detected intersections, turn right</span></div>
<div class="sourceLine" id="cb1-68" data-line-number="68">    <span class="cf">case</span> <span class="dv">2</span>:</div>
<div class="sourceLine" id="cb1-69" data-line-number="69">    <span class="cf">case</span> <span class="dv">3</span>:</div>
<div class="sourceLine" id="cb1-70" data-line-number="70">        right();</div>
<div class="sourceLine" id="cb1-71" data-line-number="71">        delay(<span class="dv">500</span>);</div>
<div class="sourceLine" id="cb1-72" data-line-number="72">        <span class="cf">while</span>(outLeft &gt; <span class="dv">900</span> || outRight &gt; <span class="dv">900</span>) { <span class="co">//while out sees black, in sees white</span></div>
<div class="sourceLine" id="cb1-73" data-line-number="73">          right();</div>
<div class="sourceLine" id="cb1-74" data-line-number="74">        }</div>
<div class="sourceLine" id="cb1-75" data-line-number="75">        <span class="cf">while</span>(inLeft &lt; <span class="dv">900</span> &amp;&amp; inRight &lt; <span class="dv">900</span>) { <span class="co">//while out sees black, in sees white</span></div>
<div class="sourceLine" id="cb1-76" data-line-number="76">          right();</div>
<div class="sourceLine" id="cb1-77" data-line-number="77">        }</div>
<div class="sourceLine" id="cb1-78" data-line-number="78">        stepCounter++;</div>
<div class="sourceLine" id="cb1-79" data-line-number="79">        <span class="cf">break</span>;</div>
<div class="sourceLine" id="cb1-80" data-line-number="80">    <span class="cf">case</span> <span class="dv">4</span>: <span class="co">//go straight after 3 right turns</span></div>
<div class="sourceLine" id="cb1-81" data-line-number="81">        forward();</div>
<div class="sourceLine" id="cb1-82" data-line-number="82">        delay(<span class="dv">500</span>);</div>
<div class="sourceLine" id="cb1-83" data-line-number="83">        stepCounter++;</div>
<div class="sourceLine" id="cb1-84" data-line-number="84">        <span class="cf">break</span>;</div>
<div class="sourceLine" id="cb1-85" data-line-number="85">    <span class="cf">case</span> <span class="dv">5</span>:<span class="co">//turn left at next 3 intersections</span></div>
<div class="sourceLine" id="cb1-86" data-line-number="86">    <span class="cf">case</span> <span class="dv">6</span>:</div>
<div class="sourceLine" id="cb1-87" data-line-number="87">    <span class="cf">case</span> <span class="dv">7</span>:</div>
<div class="sourceLine" id="cb1-88" data-line-number="88">        left();</div>
<div class="sourceLine" id="cb1-89" data-line-number="89">        delay(<span class="dv">500</span>);</div>
<div class="sourceLine" id="cb1-90" data-line-number="90">        <span class="cf">while</span>(outLeft &gt; <span class="dv">900</span> || outRight &gt; <span class="dv">900</span>) { <span class="co">//while out sees black, in sees white</span></div>
<div class="sourceLine" id="cb1-91" data-line-number="91">          left();</div>
<div class="sourceLine" id="cb1-92" data-line-number="92">        }</div>
<div class="sourceLine" id="cb1-93" data-line-number="93">        <span class="cf">while</span>(inLeft &lt; <span class="dv">900</span> &amp;&amp; inRight &lt; <span class="dv">900</span>) { <span class="co">//while out sees black, in sees white</span></div>
<div class="sourceLine" id="cb1-94" data-line-number="94">          left();</div>
<div class="sourceLine" id="cb1-95" data-line-number="95">        }</div>
<div class="sourceLine" id="cb1-96" data-line-number="96">        stepCounter++;</div>
<div class="sourceLine" id="cb1-97" data-line-number="97">        <span class="cf">break</span>;</div>
<div class="sourceLine" id="cb1-98" data-line-number="98">     <span class="cf">case</span> <span class="dv">8</span>:<span class="co">//go straight after 3 left turns</span></div>
<div class="sourceLine" id="cb1-99" data-line-number="99">        forward();</div>
<div class="sourceLine" id="cb1-100" data-line-number="100">        delay(<span class="dv">500</span>);</div>
<div class="sourceLine" id="cb1-101" data-line-number="101">        stepCounter=<span class="dv">1</span>;</div>
<div class="sourceLine" id="cb1-102" data-line-number="102">        <span class="cf">break</span>;</div>
<div class="sourceLine" id="cb1-103" data-line-number="103">     <span class="cf">default</span>:</div>
<div class="sourceLine" id="cb1-104" data-line-number="104">        <span class="cf">break</span>;</div>
<div class="sourceLine" id="cb1-105" data-line-number="105">  }</div>
<div class="sourceLine" id="cb1-106" data-line-number="106">}</div>
<div class="sourceLine" id="cb1-107" data-line-number="107"></div>
<div class="sourceLine" id="cb1-108" data-line-number="108"><span class="dt">void</span> readSensor(){</div>
<div class="sourceLine" id="cb1-109" data-line-number="109">  inLeft = analogRead(A0);</div>
<div class="sourceLine" id="cb1-110" data-line-number="110">  inRight = analogRead(A1);</div>
<div class="sourceLine" id="cb1-111" data-line-number="111">  outLeft = analogRead(A2);</div>
<div class="sourceLine" id="cb1-112" data-line-number="112">  outRight = analogRead(A3);</div>
<div class="sourceLine" id="cb1-113" data-line-number="113">}</div>
<div class="sourceLine" id="cb1-114" data-line-number="114"><span class="co">//turning functions</span></div>
<div class="sourceLine" id="cb1-115" data-line-number="115"><span class="dt">void</span> forward() {</div>
<div class="sourceLine" id="cb1-116" data-line-number="116">  leftservo.write(<span class="dv">180</span>);</div>
<div class="sourceLine" id="cb1-117" data-line-number="117">  rightservo.write(<span class="dv">0</span>);</div>
<div class="sourceLine" id="cb1-118" data-line-number="118">  readSensor();</div>
<div class="sourceLine" id="cb1-119" data-line-number="119">}</div>
<div class="sourceLine" id="cb1-120" data-line-number="120"></div>
<div class="sourceLine" id="cb1-121" data-line-number="121"><span class="dt">void</span> right() {</div>
<div class="sourceLine" id="cb1-122" data-line-number="122">  leftservo.write(<span class="dv">180</span>);</div>
<div class="sourceLine" id="cb1-123" data-line-number="123">  rightservo.write(<span class="dv">95</span>);</div>
<div class="sourceLine" id="cb1-124" data-line-number="124">  readSensor();</div>
<div class="sourceLine" id="cb1-125" data-line-number="125">}</div>
<div class="sourceLine" id="cb1-126" data-line-number="126"></div>
<div class="sourceLine" id="cb1-127" data-line-number="127"><span class="dt">void</span> left() {</div>
<div class="sourceLine" id="cb1-128" data-line-number="128">  leftservo.write(<span class="dv">85</span>);</div>
<div class="sourceLine" id="cb1-129" data-line-number="129">  rightservo.write(<span class="dv">0</span>);</div>
<div class="sourceLine" id="cb1-130" data-line-number="130">  readSensor();</div>
<div class="sourceLine" id="cb1-131" data-line-number="131">  </div>
<div class="sourceLine" id="cb1-132" data-line-number="132">}</div></code></pre>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Milestone 1</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Milestone 2 -->
    <div class="portfolio-modal modal fade" id="milestone2" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h1 id="milestone-2">Milestone 2</h1>
                    <h2 id="objective">Objective</h2>
                    <p>The primary goal of Milestone 2 is to be able to distinguish between three treasure frequencies–7kHz, 12kHz, and 17kHz–using our FFT with the IR phototransistor. Additionally, we implemented a short-range wall sensor in order to autonomously detect walls.</p>
                    <h2 id="procedure">Procedure</h2>
                    <h3 id="treasure-detection">Treasure Detection</h3>
                    <p>Most of the work for this lab had been completed in Lab 2, in which we mapped the Fourier transforms of the IR signal detected. To complete this milestone, we added LEDs to our preexisting IR detection circuit (with amplification) to individually light up upon the correct signal of a treasure.</p>
                    <p>The circuit with the LEDs can be viewed below:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/IR_distinguish.jpg" alt="IR & LED Circuit">
                  <div align="left"> 
                    <p>We referenced our amplified treasure detection data from the previous lab:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Treasure(7kHz,12kHz,17kHz).jpg" alt="IR Data (Amplified)">
                  <div align="left">   
                    <p>This data shows that bins 48, 81, and 114 correspond to the 7kHz, 12kHz, and 17kHz treasures, respectively. On average, the frequency of these bins is between 140-160–to be safe, we set our threshold of detection at 130. We added a simple conditional to check the value of the desired bins as follows:</p>
<pre><code>... 

if (fft_log_out[48] &gt; 130){         //7kHz, white
      digitalWrite(9, HIGH);  
    }
    else if (fft_log_out[81] &gt; 130){    //12kHz, green
      digitalWrite(10, HIGH); 
    }
    else if (fft_log_out[114] &gt; 130) {  //17kHz, red
      digitalWrite(11, HIGH);
    }
   else {                               //turn all off
      digitalWrite(9, LOW);   
      digitalWrite(10, LOW);  
      digitalWrite(11, LOW);
   }</code></pre>
                    <p>We set up digital pin 9 to be a white LED, 10 to green, and 11 to red. These correspond to 7, 12, and 17kHz. When the treasures are presented in front of the IR phototransistor, the idea was that the corresponding LED would light up. Our test was successful, and can be seen in the following video:</p>
                  </div>
                  <p><a href="http://www.youtube.com/watch?v=pzk-h_Un0u4"><img src="http://img.youtube.com/vi/pzk-h_Un0u4/0.jpg" alt="Treasure Detection" /></a></p>
                  <div align="left"  
                    <p>For additional testing, we set the treasure to 8kHz, 13khz, and 18kHZ to ensure our bins were small enough to not detect extraneous frequencies. This was also successful–the LEDs did not light up.</p>
                    <p>The full code for this section is pasted below:</p>
                    <pre><code>/*
fft_adc_serial.pde
guest openmusiclabs.com 7.7.14
example sketch for testing the fft library.
it takes in data on ADC0 (Analog0) and processes them
with the fft. the data is sent out over the serial
port at 115.2kb.
*/

#define LOG_OUT 1 // use the log output function
#define FFT_N 256 // set to 256 point fft

#include &lt;FFT.h&gt; // include the library

void setup() {
  pinMode(9, OUTPUT);
  pinMode(10, OUTPUT);
  pinMode(11, OUTPUT);
  pinMode(12, OUTPUT);
  Serial.begin(9600); // use the serial port
  TIMSK0 = 0; // turn off timer0 for lower jitter
  ADCSRA = 0xe5; // set the adc to free running mode
  ADMUX = 0x40; // use adc0
  DIDR0 = 0x01; // turn off the digital input for adc0
}

void loop() {
  while(1) { // reduces jitter
    cli();  // UDRE interrupt slows this way down on arduino1.0
    for (int i = 0 ; i &lt; 512 ; i += 2) { // save 256 samples
      while(!(ADCSRA &amp; 0x10)); // wait for adc to be ready
      ADCSRA = 0xf5; // restart adc
      byte m = ADCL; // fetch adc data
      byte j = ADCH;
      int k = (j &lt;&lt; 8) | m; // form into an int
      k -= 0x0200; // form into a signed int
      k &lt;&lt;= 6; // form into a 16b signed int
      fft_input[i] = k; // put real data into even bins
      fft_input[i+1] = 0; // set odd bins to 0
    }
    fft_window(); // window the data for better frequency response
    fft_reorder(); // reorder the data before doing the fft
    fft_run(); // process the data in the fft
    fft_mag_log(); // take the output of the fft
    sei();
    Serial.println(&quot;start&quot;);
    for (byte i = 0 ; i &lt; FFT_N/2 ; i++) { 
      Serial.println(fft_log_out[i]); // send out the data
    }
    if (fft_log_out[48] &gt; 130){         //7kHz, white
      digitalWrite(9, HIGH);  
    }
    else if (fft_log_out[81] &gt; 130){    //12kHz, green
      digitalWrite(10, HIGH); 
    }
    else if (fft_log_out[114] &gt; 130) {  //17kHz, red
      digitalWrite(11, HIGH);
    }
   else {                               //turn all off
      digitalWrite(9, LOW);   
      digitalWrite(10, LOW);  
      digitalWrite(11, LOW);
   }
  }
}</code></pre>
                    <p>In the future, we will have two IR detectors (one on each side) and mount them on Brooklynn. We will likely maintain the simple LED setup to flag when a treasure is detected.</p>
                    <h3 id="autonomous-wall-detection">Autonomous Wall Detection</h3>
                    <p>The other goal of this milestone was to get Brooklynn to detect a wall autonomously. To do this, we attached a short range IR sensor to the front of Brooklynn. The sensor was then attached to our Arduino via an analog pin for us to calibrate its sensor values. From there, we used snippets of our previous line detection and figure 8 code from Milestone 1 in addition to new wall direction code to make the robot turn left when a wall was detected in front of the robot at the intersection, since walls in front of Brooklynn will only occur at intersections. Our resulting code looked like the pseudocode below:</p>
<pre><code>**line following code**
if (at an intersection and a wall is detected in front)
    turn left</code></pre>
                    <p>The full code can be found at the bottom of this page.</p>
                    <p>In addition, a video of Brooklynn autonomously detecting walls and turning is below:</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=U8qxujkT1dE"><img src="http://img.youtube.com/vi/U8qxujkT1dE/0.jpg" alt="Wall Detection - Left Turn" /></a></p>
                  <div align="left">  
                    <p>In the future, we will use two more short range IR sensors, one on each side of Brooklynn, to detect walls on her respective sides. This will help in mapping out the maze, as well as allow Brooklynn to determine which direction she needs to turn when at an intersection. These sensors have been mounted and correctly detect walls like the front sensor, but are not in use at the moment.</p>
                    <h2 id="build-changes">Build Changes</h2>
                    <p>At the point of this report, Brooklynn is being dismantled in order to have the wiring reorganized and more accessible for future use. Here is the current status:</p> 
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/brooklynn_before.jpg" alt="Before">
                  <div align="left"> 
                    <p>The idea is to restructure her (for now) so that the arduino sits on the lower base plate while the entire upper base plate is used as an extended circuit board. We decided to switch the locations of the breadboard and arduino because we realized that between adding the new hardware components, and creating new Schmitt Triggers, we would need much more ease of access to large parts of the breadboard than we had in the previous setup.</p>
                    <p>A key feature of this reorganization is also going to involve resizing all of the wires so that they fit tightly into the breadboard and are easily traceable from the hardware. In line with this, we hope to keep things as color coded as possible. Eventually, we agreed that we will be making a change away from using a breadboard, into a perf board so that wire connections are again cleaner and more secure. The reason why we are waiting to do this is because we have found that we have needed to move the hardware components around a lot as we enhance Brooklynn’s robotic capabilities and we therefore, need the flexibility of the breadboard.</p>
                    <p>A final thing that we are considering in our build changes is how to keep our center of mass as low and centered as possible, so as to avoid her tipping over while navigating the maze. In the previous setup, she was getting to be a bit too tall which would be fine if we added weight to her, but this would subsequently compromise her speed. For now, we removed the third level shown in the image above but are still maintaining the height gap between the two base plates just so that we can have ease of access to both the arduino and breadboards. Once we finalize all of the hardware and wiring, we will likely lower the top plate and even consider switching it so that the arduino is on top again since all of the wiring will be sodered onto a perf board by then.</p>
                    <h3 id="schmitt-triggers">Schmitt Triggers</h3>
                    <p>We realized that we will soon have too many analog sensors for the 6 pins on the Arduino Uno. To remedy this, we have begun the implementation of Schmitt triggers. Conceptually, these are comparator circuits that actively convert analog input into digital output. Essentially, we choose threshold voltages to turn “on” and “off” at, and calculate corresponding resistor values from there. We used an <a href="https://www.random-science-tools.com/electronics/inverting-schmitt-trigger-calculator.htm">Inverting Schmitt Trigger Calculator</a> and used the following base circuit:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/inverting-schmitt.jpg" alt="Inverting Schmitt Trigger">
                  <div align="left"> 
                    <p>We will convert our outer two line sensors and two side wall sensors to digital signals using Schmitt Triggers in order to have enough analog pins for the remaining line sensors, front wall sensor, microphone, and IR treasure sensors.</p>
                    <p>Our first attempt was to use a non-inverting Schmitt Trigger for all four signals. We read the digital values in the Arduino IDE and printed to the serial monitor. Using the LM358 dual op-amp again, the implemenation is shown below:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/noninverting_schmitt.jpg" alt="Non-inverting Schmitt Trigger">
                  <div align="left"> 
                    <p>This did not work. On the oscilloscope and the serial monitor, we could tell the signal started low and would switch to high when desired, but would never come back down. After discussing with a TA, we realized the feedback loop was somehow interfering with the output signal. We then chose to switch to an inverting Schmitt Trigger at this point.</p>
                    <h3 id="wall-detection-code">Wall Detection Code</h3>
<pre><code>#include &lt;Servo.h&gt;

Servo leftservo;
Servo rightservo;

int inLeft;
int inRight;
int outLeft; 
int outRight;

void setup() {
  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
  pinMode(9,OUTPUT);
  pinMode(10,OUTPUT);
  
  leftservo.attach(9);
  rightservo.attach(10);
  
}

// the loop routine runs over and over again forever:
void loop() {
  // read the input on analog pin 0:
  readSensor();

  while (outLeft &lt; 900 || outRight &lt; 900){ //while both outer sensors see white
    if (abs(inLeft-inRight)&lt;70){ //if inner are similar
      leftservo.write(180);
      rightservo.write(0);
      
    }
    else if (inLeft&gt;inRight){ //if tilted left, correct
      leftservo.write(90);
      rightservo.write(0);
      
    }
    else if (inRight&gt;inLeft){ //if tilted right
      leftservo.write(180);
       rightservo.write(90);
     
    } 

  readSensor();
  }

  if (analogRead(A5) &gt; 200) { //If at an intersection and a wall is detected in front
    left();
    delay(500);
    while(outLeft &gt; 900 || outRight &gt; 900) { //while out sees black, in sees white
      left();
    }
    while(inLeft &lt; 900 &amp;&amp; inRight &lt; 900) { //while out sees black, in sees white
      left();
    }
  }
  else{ // if there is no wall in front at the intersection, drive across
    forward();
    delay(500);
  }
}
void forward() {
  leftservo.write(180);
  rightservo.write(0);
  readSensor();
}

void left() {
  leftservo.write(85);
  rightservo.write(0);
  readSensor();
}
void readSensor(){
  inLeft = analogRead(A0);
  inRight = analogRead(A1);
  outLeft = analogRead(A2);
  outRight = analogRead(A3);
}</code></pre>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Milestone 2</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Milestone 3 -->
    <div class="portfolio-modal modal fade" id="milestone3" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h1 id="milestone-3">Milestone 3</h1>
                    <h2 id="objective">Objective</h2>
                    <p>Our objective for Milestone 3 was to implement a search algorithm in simulation as well as in real life. In both, the robot must display a “done” signal at the end of the search (i.e. once all explorable squares have been visited).</p>
                    <h2 id="procedure">Procedure</h2>
                    <h3 id="simulation">Simulation</h3>
                    <p>We chose to write our simulation in Python, due to the simplicity of interfacing with graphics. We used the <a href="https://www.pygame.org/">Pygame library</a> for the display, which is often used for simple game development. To create the virtual environment that would simulate the real-life maze, we wrote two classes. The class Square would create each “square” (i.e. intersection in the maze) with attributes describing its (x,y) coordinate, index (from 0-19), and if any walls surround the square.</p>
<pre><code>class Square():
    &quot;&quot;&quot; 
    Instance is each grid square.
    &quot;&quot;&quot;

    def __init__(self, x, y, index, right, down, left, up):
        self.x = x
        self.y = y
        self.index = index
        self.right = right
        self.down = down
        self.left = left
        self.up = up</code></pre>
<p>The Maze class initializes the maze itself, which is a 2D array of Square objects. There are functions within this class that assist with its usability. makeSquares() creates the 2D array, assigning the coordinates and indicies; and setupWalls() uses two presumably assigned “horizontal wall” and “vertical wall” 2D arrays to assign each Square’s directional wall attributes.</p>
<pre><code>    def makeSquares(self):
        x = 0
        y = 0
        index = 0
        right = 0
        down = 0
        left = 0
        up = 0
        for row in range(ROWS):
            for col in range(COLS):
                self.squares[row][col] = (Square(row, col, index, right, down, left, up))
                index = index + 1

    def setupWalls(self, hwall, vwall):
        for row in range(ROWS):
            for col in range(COLS):
                if hwall[row][col] == 1:
                    self.squares[row][col].up = 1

                if hwall[row + 1][col] == 1:
                    self.squares[row][col].down = 1

                if vwall[row][col] == 1:
                    self.squares[row][col].left = 1

                if vwall[row][col + 1] == 1:
                    self.squares[row][col].right = 1</code></pre>
                    <p>After initializing the squares, Maze, walls, and the Pygame library, we define two more functions--depth first search, and drawing the maze. The drawing function simply interfaces with the Pygame library, setting the color of the squares, and drawing in walls if applicable.</p>
                    <p>Depth first search seemed like the natural go-to search algorithm, as a robot can efficiently continue down a path, but it cannot teleport to diagonal squares like breadth-first would require. Since Python allows modification of the size of lists, we initialize three lists to use as stacks--visited (i.e. which squares the robot has gone to), a frontier (in order, the next squares to visit), and a path (in order, the squares visited) to facilitate backtracking when it is needed. First, we implemented the search itself with no real-life analog, as "paths" were not taken into account, only visited versus unvisited squares (additionally, at this point, we were not sure how to display the walls).</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=R9SG0TY4oV8"><img src="http://img.youtube.com/vi/R9SG0TY4oV8/0.jpg" alt="Simple DFS" /></a></p>
                  <div align="left"> 
                    <p>To more realistically simulate the robot, we needed to not have the "current" location teleport to nonadjacent squares. To do this, we used a variable "goback" to determine if a dead-end is hit, whether with walls or due to all adjacent squares being visited. Our next attempt at this was to pop things back off of the visited stack until unvisited squares were visited, but this posed this issue where, due to the adjacency of squares, added squares to the frontier multiple times. The robot would then go back to squares unnecessarily. Here is an example:</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=sWuasLnlQh4"><img src="http://img.youtube.com/vi/sWuasLnlQh4/0.jpg" alt="DFS with flawed path" /></a></p>
                  <div align="left">
                    <p>Starting by adding the first, <em>start</em> square to the frontier, if going back is not necessary, we set a <em>current</em> variable to be what is popped off the frontier. We set this to be blue (against the green of visited squares) to signify it is the current square. Putting it in the path, additionally, if this square is not already visited, we put it in visited.</p>
                    <p>To determine how to add squares to the frontier, we set a definitive priority–most prioritized was east, then south, west, and north (as we set our grid to be landscape mode, with our start square in the top left). The simulation checks if there is a wall in a direction, and if not, set <em>next</em> to that square. This more realistically simulates the robot, as it will not know whether it is surrounded by walls or not until it physically gets to the square–so our simulation “uncovers” walls as it goes. If the square should be visited, it is added to the frontier.</p>
<pre><code>    if current.up == 0: #if no wall to top
    next =  squares[current.x - 1][current.y] #up one
    hwall[current.x][current.y] = 0
    if next not in visited:
        frontier.append(next)</code></pre>
                    <p>This is repeated for each direction. If nothing was appended to the frontier, backtracking is required. In this situation, for each node in the frontier, if it’s been visited, it can be removed from the frontier. If there is anything left in the frontier, the top of the path (i.e. the most recently visited square) is appended, such that popping off the modified frontier will effectively backtrack on the previously taken path. This continues until the robot reaches its goal, or the next unexplored square. Once at this goal, <em>goback</em> returns to 0.</p>
<pre><code>for node in frontier:
    if (node in visited):
        frontier.remove(node)
    tmp2 = path.pop()
    if (len(frontier) != 0):
        frontier.append(tmp2)
    goback = 0</code></pre>
                    <p>At the end, the screen is cleared and “DONE” in text is displayed. Here are a few videos of the simulation:</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=RPFqAKOzDf8"><img src="http://img.youtube.com/vi/RPFqAKOzDf8/0.jpg" alt="DFS" /></a></p>
                  <p><a href="https://www.youtube.com/watch?v=JWV8G73PGTc"><img src="http://img.youtube.com/vi/JWV8G73PGTc/0.jpg" alt="DFS with unreachable area" /></a></p>
                  <div align="left">
                    <p>In the future, we would like to implement Dijkstra’s algorithm, particularly in relation to finding a path across the maze to an unvisited square when backtracking is required.</p>
                    <h3 id="robot">Robot</h3>
                    <p>The concept for real-life implementation was to implement the bulk of it based on the Python simulation. We started from our robot base code that could sense walls and follow lines. In emulating our Square class, we created a Square struct with x and y coordinates.</p>
<pre><code>typedef struct{
  int x; int y;
} Square;</code></pre>
                    <p>We utilized the <a href="https://playground.arduino.cc/Code/StackArray">StackArray</a> library to implement a dynamic stack for our frontier and path. To keep track of the visited squares, we created an array of size 20 (the maximum amount of vistable squares in our 4x5 grid). We initialize our <em>start</em> square to (0,0), and push it to the frontier.</p>
                    <p>The main change between our simulation and real-life implementation is keeping track of the robot’s orientation, to properly turn to the next square. To do this, we kept track of the direction the robot with a variable, then used it in conjunction with the coordinates the robot was at and the coordinates the robot was to go next. From the coordinates, we determined if the robot was going north, south, east or west in reference to our maze map. This would give us both the cardinal direction and new orientation of the robot. 0 corresponded to north, 1 to east, 2 to south, and 3 to west.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/Orientation-Coordinates.jpg" alt="Orientation Coordinate Map">
                  <div align="left"> 
                    <pre><code>char reorient(char current[], char next[], char curr_o) {
  char next_o = 0;
  char diff[] = {0, 0};
  diff[0] = next[0]-current[0];
  diff[1] = next[1]-current[1];
  
  if (diff[0] == -1){ //north
    next_o = 0;
  }
  else if (diff[0] == 1){ // south
    next_o = 2; 
  }
  else if (diff[1] == -1){ // west
    next_o = 3; 
  }
  else if (diff[1] == 1){ // east
    next_o = 1;
  }</code></pre>
                    <p>The next part of the code calculated how the robot should turn based on how its orientation should change. With the cardinal number system described above, we can determine whether the robot should go straight, turn left or right, or turn around by subracting the new orientation from the current orientation. A table below with the corresponding values calculated describes how the robot acts, and the next part of the code below shows this in action.</p>
<table border = "1">
<thead>
<tr class="header">
<th>Calculated Value</th>
<th style="text-align: center;">Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td style="text-align: center;">Straight</td>
</tr>
<tr class="even">
<td>-1, 3</td>
<td style="text-align: center;">Left</td>
</tr>
<tr class="odd">
<td>1, -3</td>
<td style="text-align: center;">Right</td>
</tr>
<tr class="even">
<td>-2, 2</td>
<td style="text-align: center;">Turn Around (Flip)</td>
</tr>
</tbody>
</table>
<pre><code>  if (next_o - curr_o == 0){
    //straight
    forward();
    delay(200);
  }
  else if (next_o - curr_o == 1 || next_o - curr_o == -3){
    //turn right
    right();
    delay(800);
  }
  else if (abs(next_o - curr_o) == 2){
    //flip
    flip();
    delay(1250);
  }
  else if (next_o - curr_o == -1 || next_o - curr_o == 3){
    //turn left
    left();
    delay(800);
  }
  
  curr_o = next_o;
  Serial.println(curr_o);
  
  stp();
  return curr_o;
}</code></pre>
                    <p>Finally, the robot updates its new orientation and returns to line following code. To test this, we manually wrote what each <em>next</em> square should be. A video of the code being tested can be found below.</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=crRketHEy54"><img src="http://img.youtube.com/vi/crRketHEy54/0.jpg" alt="Reorientation" /></a></p>
                  <div align="left">
                    <p>Our reorientation code requires inputs of a <em>current</em> square, the <em>next</em> square, and the current <em>orientation</em>. These are given from our depth first search implementation. The DFS function follows the logic of our simulation, referring to each square by its (x,y) coordinates. While the frontier is not empty, if backtracking is not required, we find the <em>current</em> node, check if it is visited, and visit it if it hasn’t been. Again, it is also added to the path stack.</p>
                    <p>To determine the coordinates of the next square, the wall sensors are checked. If there is no wall, the corresponding direction determines the next square to visit. If it has not yet been visited, it is added to the frontier. This happens in reverse order of our priority, and is repeated for each direction.</p>
<pre><code>if(wallL == 1){ //no wall on left
        if(orient == 3){
          next.x = current.x + 1;
          next.y = current.y;
        }
        else if(orient == 2){
          next.x = current.x;
          next.y = current.y + 1;
        }
        else if(orient == 1){
          next.x = current.x - 1;
          next.y = current.y;
        }
        else if(orient == 0){
          next.x = current.x;
          next.y = current.y - 1;
        }
        if(!isMember(next, visited, visitedSize)){
          frontier.push(next);
        }
      }
...</code></pre>
                    <p>isMember() is a function to simply check if a square has been visited. The definition of this function uses squareCompare(), which checks if the (x,y) coordinates of the two squares are equivalent. At this point, we wanted to check our basic DFS without walls was working. Here is the test:</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=Xgz4F1bXa_Q"><img src="http://img.youtube.com/vi/Xgz4F1bXa_Q/0.jpg" alt="DFS, no walls" /></a></p>
                  <div align="left">
                    <p>After determining this was successful, we returned to the code. At the end of checking the wall sensors (of which we have three--two on the sides and one in front), if nothing was added to the frontier, the robot needs to backtrack.</p>
                    <p>Currently, this is as far as we have been able to implement the Arduino code. Outputting the next square to the Serial Monitor, the robot knows where it needs to go, but currently fails to begin the backtracking process. In the future, we will add the implementation of going back on its path, and later, Dijkstra's algorithm instead of pure backtracking in order to find the shortest path to the next unvisited square. For now, we are still able to search the maze up until it needs to go back.</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=PIfQIYtSzbo"><img src="http://img.youtube.com/vi/PIfQIYtSzbo/0.jpg" alt="DFS, no backtracking" /></a></p>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Milestone 3</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
                                        
    <!-- Milestone 4 -->
    <div class="portfolio-modal modal fade" id="milestone4" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h1 id="milestone-4">Milestone 4</h1>
                    <h2 id="objective">Objective</h2>
                    <p>The objective of Milestone 4 is to prepare Brooklynn for the final competition: displaying walls and treasures as the robot explores, and displaying a <em>done</em> signal as well as playing a <em>done</em> tone when the maze has been fully mapped. Additionally, we spent a significant portion of time completing unfinished tasks and improving previous work.</p>
                    <h2 id="procedure">Procedure</h2>
                    <h3 id="backtracking-algorithm">Backtracking Algorithm</h3>
                    <p>For this milestone, one of the first tasks that we worked on was completing the depth first search code to properly complete backtracking. When finishing up this part of the code, we realized that she was perfectly capable of exploring the entire maze using dsf when there was at least one square of the maze that was closed off. However, as soon as we opened up the maze so that every square in the 4x5 grid could be explored, she would malfunction and reset the code before reaching the very last square. At first we thought it was a memory problem but after writing in code to check the memory of the data we were storing and outputting, we realized that we were nowhere near the capacity. Finally, we ended up realizing that the problem relied on the size of the array that we initialized the maze to be. Although we made the array size 20 because there are 20 squares in the grid, we realized that the array size actually needs to be 21. This is because the way our code works, we have Brooklynn initialized to start on an “imaginary” square at location (0, -1) so that when it encounters the very first intersection at (0,0), it can go through the proper procedure of adding the available options to the frontier. After changing the size of this array, we found that the dfs code was fully functional.</p>
                    <p>For the final competition, we want our backtracking algorithm to implement Dijkstra’s algorithm and backtrack using the shortest path instead of the path it had originally taken to get there. The shortest back algorithm is pretty straightforward - once the robot gets to the dead end, it would check the current node that it is on and check the next node in the frontier and do a breadth first search to find the shortest path to the next node from the current position. Once it finds the path, Brooklynn would simply folow the path until she reaches the next node and then she will continue with dfs. The way we plan on holding the information about the maze on the robot is with a struct, called Squarewalls, that has fields called n, w, s, and e. These fields represent the north, west, south, and east sides in an intersection. We will make a 2D array of the struct Squarewalls to hold the maze information. As of now, we have begun implementing the shortest path algorithm but it is not yet complete.</p>
                    <h3 id="integrating-the-treasures">Integrating the Treasures</h3>
                    <p>Instead of shorting the treasure sensors together, we decided to toggle quickly between analog pins 3 and 4 on each iteration of the FFT. We did so through the following code:</p>
                    <pre><code>if (ADMUX == 0x43){
      ADMUX = 0x44;         //a4
      DIDR0 = 0x05;
    }
else if (ADMUX == 0x44){
  ADMUX = 0x43;             //a3
  DIDR0 = 0x04;
    }</code></pre>
                    <p>This data is collected on the robot and will be sent via radio to the base station.</p>
                    <p>At every intersection, Brooklynn is programmed to check for the presence of treasures. Within DFS, she also checks for walls in order to add squares to the frontier–this is when we also update the <em>walls</em> variable. Her update to the walls depends on its orientation, as in Milestone 3. Shifting the data as usual, the packet is sent through radio. The receiving Arduino receives the data and sends it to the FPGA through SPI and the treasures should update on the display.</p>
                    <p>To install the IR sensors onto the hardware, we first had to solder and heat shrink wires onto the sensors. We then designed and 3D printed the mount shown below for the IR sensor to be held in. We especially wanted the hollow part of the piece to be long so that the sodered and heat shrunk parts of the wires would be protected.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/mounts.jpg" alt="Treasure Mounts">
                  <div align="left"> 
                    <h3 id="implementing-spi">Implementing SPI</h3>
                    <p>We have reformatted our packets to send the data we will actually need to display the correct data. We are using a 16-bit packet, like so:</p>
<pre><code>valid | done | 17kHz | 12kHz | 7kHz | north | east | south | west | orientation | orientation | x | x | x | y | y</code></pre>
                    <p>We use a valid bit in order to determine which data to “throw away,” such as any startup inconsistencies or the 16b’0 signal that may send at the beginning. The done bit is self-explanatory–this will be 1 when the robot has finished exploration and 0 otherwise. The following three bits describe if the robot has detected a treasure, and the respective bits describe the frequency. The next four bits describe if the robot has detected walls, and what direction the wall is in. Orientation follows the same guidelines as we used in Milestone, as do the x and y coordinates.</p>
                    <p>In Lab 4, we utilized parallel communication, under the assumption it would be a simpler implementation. We recognized that we would not have enough digital pins to do so, and made the switch to SPI (which uses less pins on the Arduino) for this milestone.</p>
                    <p>Our SPI uses three main lines–Master Out Slave In (MOSI), Clock (SCK), and Slave Select (SS). We connected the receiving Arduino to the FPGA. When the SS pin is low, it communicates with the master (i.e. the Arduino). A new driver was written to read in the data from the radio module, check which slave to send to, send the data, and check for a successful transfer. We then stop SPI and set the SS pin high again to end communication.</p>
                    <p>Debugging:</p>
                    <p>Oddly, we were having an issue with using the MISO pin, despite there only being one master and one slave. When the line was connected to the Arduino, data transmission would stop. Unplugging the MISO pin allowed the transmission to continue as usual. Considering that we don’t need to send data from the slave to the master, we have just left it unplugged.</p>
                    <h3 id="finish-tune">Finish Tune</h3>
                    <p>We wanted to create a tune instead of having a plain finish tone. We transcribed “Take Me Out to the Ball Game” and defined the C5-C6 major scale’s frequencies for convenient use. From there, since we are only using 24 beats of the song, we modified our sound generation code from Lab 3 to check which <em>note</em> values (i.e. “indexed” beat of the song) corresponded to which notes in the scale. Here is a snippet of our song definition code:</p>
                    <pre><code>if (note == 0 || note == 1 || note == 12 || note == 13) begin   //C5
    count &lt;= CLKDIVIDER_C5 - 16&#39;b1;
    note &lt;= note + 5&#39;b1;
end
else if (note == 9 || note == 10 || note == 11 ) begin          //D5
    count &lt;= CLKDIVIDER_D5 - 16&#39;b1;
    note &lt;= note + 5&#39;b1;
end

...</code></pre>
                    <p>And so on. The actual tune can be heard in this video (the first C5 is hard to hear):</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=YnziLtI_s6o"><img src="http://img.youtube.com/vi/YnziLtI_s6o/0.jpg" alt="Finish tune" /></a></p>
                  <div align="left"> 
                    <h3 id="displaying-data">Displaying Data</h3>
                    <p>Once the FPGA receives this packet of data, it parses the data back into the respective sections, e.g. valid bit, done, treasures, etc. A new driver was written to update the maze graphic. After initializing our maze with walls to zeros, we iteratively check if each square needs to be updated, and if not, to keep it the same. This is where we update the color of the square if a treasure is present:</p>
                    <pre><code>if ( treasures == 3&#39;d0 ) begin //no treasures
        if ( maze_state[maze_x][maze_y] == 3&#39;d0 ) maze_state[maze_x][maze_y] &lt;= 3&#39;d1;
        else maze_state[maze_x][maze_y] &lt;= maze_state[maze_x][maze_y];
    end
    else begin
        case(treasures)
            3&#39;b001: maze_state[maze_x][maze_y] &lt;= 3&#39;d4; //7kHz
            3&#39;b010: maze_state[maze_x][maze_y] &lt;= 3&#39;d5; //12kHz
            3&#39;b100: maze_state[maze_x][maze_y] &lt;= 3&#39;d6; //17kHz
            default: maze_state[maze_x][maze_y] &lt;= 3&#39;d7;
        endcase
    end</code></pre>
                    <p>Without this iteration, an inferred latch occurs. The walls are assigned based on the location of the square, the orientation of the robot, and the wall data received through SPI. Once everything is assigned, the colors are updated to reflect the respective state of the square or wall.</p>
                    <p>To test if the graphics were updating correctly based on the data, we created a MATLAB script to create packets that would simulate our manually assigned mazes. Below is a partial maze test.</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=0-J19PKXrj4"><img src="http://img.youtube.com/vi/0-J19PKXrj4/0.jpg" alt="Middle maze display" /></a></p>
                  <div align="left">
                    <p>After working out the bugs, we added an arrow to show the current orientation. The following map corresponds to the successful run below it:</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/maze.jpg" alt="Maze">
                  <p><a href="https://www.youtube.com/watch?v=401oCFdBCfc"><img src="http://img.youtube.com/vi/401oCFdBCfc/0.jpg" alt="Full maze display" /></a></p>
                  <div align="left"> 
                    <p>We currently have an issue with the top row not displaying walls correctly. However, the maze display otherwise responds correctly to the inputs. We plan to fix this error before the final competition.</p>
                    <p>After completing both the display and finish tune, we integrated both together with much success. The display shows the robot complete the maze, then turns green and plays "Take Me Out to The Ball Game." The video can be seen below.</p>
                    <p>Debugging:</p>
                    <p>We had a lot of issues with displaying the data. Our primary issue was seemingly arbitrary walls and squares showing up when they had been neither explored nor called at all. The root of this issue had been the clock speeds, in which we were running our grid driver slower than SPI and VGA output. The changing signals became stable once we set the clock speeds to be the same.</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=6-xsw_91FSI"><img src="http://img.youtube.com/vi/6-xsw_91FSI/0.jpg" alt="Displaying maze with done signal" /></a></p>
                  <div align="left">
                    <h3 id="future-work">Future Work</h3>
                    <p>While we didn’t quite have time to combine all of the components of this milestone, we have done enough unit testing to be confident that we will be able to integrate the radio sending code for the final competition.</p>
                    <p>Additionally, we have been working on implementing Dijkstra’s algorithm to backtrack more efficiently. This is mostly functional, as can be seen in the videos below:</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=zIg74VQQIzY"><img src="http://img.youtube.com/vi/zIg74VQQIzY/0.jpg" alt="Dijkstra’s (1)" /></a></p>
<p><a href="https://www.youtube.com/watch?v=j25lZeRPJQ8"><img src="http://img.youtube.com/vi/j25lZeRPJQ8/0.jpg" alt="Dijkstra’s (2)" /></a></p>
                  <div align="left">  
                    <p>However, they do not fully finish, and would then fail to send a <em>done</em> signal. This is why we chose to revert to our functional DFS code with backtracking for this milestone, but we will finish up Dijkstra’s later.</p>
                    <p>Although the display is (mostly) functional, the solid colors used are generally unappealing. We plan to change the graphics to use images for the ground, background, and walls. We also want to display our robot with a more appealing icon, instead of just an arrow. In addition, the small squares between walls will be addressed to blend in with walls and/or the ground to make the grid appear more seamless.</p>
                    <p>Finally, we plan to clean up the wiring on Brooklynn to avoid catching on things as well as simple aesthetics, and are ordering faster servo motors to replace the slower ones we are currently using. We are also getting voltage regulators to use in conjunction with the new servos.</p>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Milestone 4</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Final Competition -->
   <div class="portfolio-modal modal fade" id="Final" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h2 id="objective">Objective</h2>
                    <p>In our last week of the course, our goal was to finalize Brooklynn for the competition, from integrating more modules completed in previous labs and milestones (e.g. the microphone) to improving the existing system. </p>
                    <h2 id="graphics">Graphics</h2>
                    <p>In designing a display of real time maze mapping, it seemed like a good idea to include the robot's current orientation, especially given that the robot would already be storing this information. We also were using 16 bit packets and had plenty of space left in them to include it. Including this information also allowed for extra protections against mapping false walls or lack thereof. This was done by not updating any wall data from the opposite direction that the robot was facing in the square. We had issues with some maze walls not appearing correctly that vexed us for a while, but eventually we figured out that it was a stray misplaced begin/end pair and a set of incorrect max indices.<p>
                    <p>For the final version of the display we wanted to chose images that would both create a more unified theme, as well as look good given the resolution and color limitations. Because our robot's name is Brooklynn, we wanted to go for a more urban theme.</p>
                    <p>As the most dominant image, the background picture was the most important. We ended up going with a stamped sheet metal texture for a number of reasons. It is a simple, recognizable urban/industrial flooring texture, which works well with both the theme and the lower resolution image requirement. It also worked well for our color needs in that it does not require too much variation in the blues and as a gray none of the colors were saturated, allowing the treasure colors to be added on top. Because of its repetitive nature, this texture also worked well for tiling.</p>
                    <p>The image for the walls was the most difficult to choose, but in the end we decided to go with an abstract texture which was more uniform and has high contrast to the background image. We went with thin overlapping lines because it seemed like a good balance between industrial and tech-y.</p>
                    <p>For the sake of clarity, we chose to have the robot represented as an arrow so that it would be easy to tell which way it was oriented. To keep the image overhead down, we used conditional indexing in order to display the arrow in the right orientation and to replace the arrow background with the background texture image. This also allowed us to try many different combinations of robot images and backgrounds without having to remake the color list files which stored the image data.</p>
                    <p>Our previous done signal had been to turn the whole screen green, but we decided that this was not ideal as it made the final maze no longer visible. To remedy this issue we changed to have the sides of the screen turn green instead, leaving the maze intact, and changing the blank image for all unvisited squares to an X to show that those were unvisitable. we had a no entry sign, but it was pointed out to us that this did not look good with the green on the sides, so we switched to the X and it went much better with our color theme.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/vga-map-final.jpg" alt="VGA Map">                    
                  <div align="left">  
                    <h2 id="dijkstras-algorithm">Dijkstra's Algorithm</h2>
                    <p>Our shortest path algorithm only considers visited locations in the path, as there is no information about unexplored areas. While this is oftentimes the same path as depth-first-search, this is not always the case.</p>
                    <p>To find the shortest path, an array is initialized and set to the max values. A queue of Squares is also initialized, to which the current square is added--while this queue is not empty or a variable named <code>dontstop</code> is true, we check if the current square is visited. If it is not, we make it visited. If the destination square is the current one, <code>dontstop</code> is set to false. The best path array is updated to include the shortest path to each node from the current one. Finally, the shortest path is added to the actual intended path for Brooklynn to take. This whole processes is looped through until the desired node has been mapped. A few test runs of this search are seen below:</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=MuhzCjLBBoQ"><img src="http://img.youtube.com/vi/MuhzCjLBBoQ/0.jpg" alt="Dijkstra’s (1)" /></a></p>
                  <p><a href="https://www.youtube.com/watch?v=WUrMCMqIn4c"><img src="http://img.youtube.com/vi/WUrMCMqIn4c/0.jpg" alt="Dijkstra’s (2)" /></a></p>
                  <p><a href="https://www.youtube.com/watch?v=GyfD_o15UDs"><img src="http://img.youtube.com/vi/GyfD_o15UDs/0.jpg" alt="Dijkstra’s (3)" /></a></p>
                  <div align="left">
                    <h2 id="integration">Integration</h2>
                    <h3 id="radio">Radio</h3>     
                    <p>The basis of this work was completed in Lab 4 and Milestone 4. We created a helper function called <code>radio_send</code> that created the packets from the current position, wall, treasure, orientation, and state data (e.g. valid and/or done), and then sent it.</p>
                    <p>Because we ran into issues with some packets failing to send, we sent the packets of data multiple times at each intersection of the maze after it searched for treasures. Although not all the packets were received, because the sets of packets contained the same data, the base station still generally received all the necessary data. With the time constraint, we were unable to discover the root of this issue.</p>
                    <p>In addition to the failing packets, we had some issues with the robot sending packets which were mostly 1s. This created problems for the FPGA because it would receive a false done signal, often when the robot was just powering up, being programmed, or being reset. In order to keep this from interfering with the FPGA, we both setup safeguards in the Verilog code instructing it to ignore a done signal if the packet also said that all three treasures had been detected in that square. To further safeguard, the receiving Arduino had a conditional to not send the packet over SPI if there was a done signal and the x coordinate (width side of maze, 0 indexed) was greater than 4. While we did find the source of the packets with many 1s that were occurring while in the middle of mapping the maze (a negative number), these safeguards did help get rid of the startup junk packets of all 1s.</p>
                    <h3 id="treasure-sensors">Treasure Sensors</h3>
                    <p>For the final competition we mounted our second treasure sensor so that Brooklynn could detect treasures on both sides. Our treasure sensing code was largely unmodified from our Lab 2 implementation using the OpenMusicLabs FFT library. We used 64 samples instead of the initial 256 to save on memory, changing our intended 7kHz, 12kHz, and 17kHz bins to 12, 20, and 28 respectively instead of the bins calculated from Lab 2. The key component of integration needed was resetting the initial values of ADCSRA, ADMUX, DIDR0, and TIMSK0 to their initial state after calling our <code>find_treasures</code> function, which modified them. Because of the two treasure sensors, we switched between analog pins 3 and 4 (by changing ADMUX from 0x43 to 0x44) before running the FFT. This code is run through four times at each intersection--two times for each side.</p>
                    <p>In addition to checking for treasures while generally traversing the maze, we needed to cover the edge cases of treasures at dead ends or on a wall not looked at in the last visited square of the maze. In order to cover the dead end case, we made sure that the robot would stop half way through a 180 degree turn, check for treasures, and send a packet to the base station via the radio. For the case of unchecked walls in the final square we added turning and checking for treasures as a required step before sending the done signal after completing the maze.</p>
                    <h3 id="microphone">Microphone</h3>
                    <p>The key component missing from Milestone 4 was starting on the 660 Hz tone. Since we had already created a bandpass filter in Lab 2, we simply utilized our understanding of the FFT to check for the bin that included the 660 Hz tone--which, by our calculations, was bin 5. Using the same method as checking for treasures (i.e. returning true when our chosen threshold was surpassed), we created a helper function <code>check_mic</code>. The result of calling this function was stored in a variable <code>start_signal</code> that indicated when a 660 Hz tone was detected, which, when true, would allow the search functionality to begin.</p>
                    <p>For security, we also added a pushbutton to serve as a microphone override button. In case Brooklynn failed to start on the 660 Hz tone, pushing the button also set <code>start_signal</code> to true.</p>
                    <h2 id="base-station">Base Station</h2>
                    <p>Given all of the interconnected parts of the base station, it seemed like a good idea for us to create a way to keep all of the pieces together and secure when moving it around. At first, we strongly considered soldering the breadboarded portions (voltage dividers and DAC), but given time constraints and the fact that there would still be multiple unconnected pieces, this idea was abandoned. After seeing another team using a piece of cardboard to move their base station around, we decided to mounted the FPGA and Arduino to it using screws, and then used zip-ties to attach the breadboard and audio jack. All of this helped make it easier to move, make sure wires would be less likely to come dislodged in transit, and also made it look nicer.</p>
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/fpga-base-schematic.jpg" alt="FPGA Base Schematic">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/fpga-base1.jpg" alt="FPGA Base (1)">
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/fpga-base2.jpg" alt="FPGA Base (2)">      
                  <div align="left">
                    <h2 id="renovated-website">Renovated Website</h2>
                    <p>Before the final competition, we decided to give our website a complete overhaul. This meant converting all of our documents (previously written in markdown) into html. Instead of links, the website is also now a single page that uses modals, a type of popup window, to display all of our documents. In addition, we now have a header bar that contains shortcuts to each major section of the website, as well as a link to our YouTube page. All in all, the website appears cleaner, is easier to navigate, and allows us to display much more information in an organized manner.</p>
                    <h2 id="wiring">Wiring</h2>
                    <p>With all the features we had been adding to Brooklynn throughout the semester, our robot’s wiring became incredibly messy. We cleaned it up by removing all of our lengthier wires and replacing them with shorter ones. This made it easier to access any different parts of the robot, as well as prevent wires from being accidentally ripped out of their corresponding sockets. We also added labels on each of the wires to make any potential accidental unplugging easier to fix. In addition, the labels made our wiring appear more organized, since they could all be easily identified without having to be traced back to the arduino and referenced with our code.</p>
                    <h2 id="finish-tune">Finish Tune</h2>
                    <p>Initially, we decided on using the first two lines from the song “Take Me Out To The Ballgame.” We decided, however, that this didn’t fit the style we were going for, and chose to use a less niche song for our done signal. The team finalized on the song “All I Want For Christmas Is You.” To keep things simple, we kept our original scale and transcribed our new song using the corresponding notes available. The final song felt much more fitting given the timing of the competition and the need for something lighthearted and positive after a comprehensive and challenging semester.</p>
                    <h2 id="unused-modifications">Unused Modifications</h2>
                    <p>There were many upgrades we attempted for the competition that fell through as either inconsistent, hard to integrate, or too time-consuming. For the final competition, we relied on the components that had reliably worked in the past instead of the upgrades that were not perfected.</p>
                    <p>We chose to purchase the <a href="https://www.parallax.com/product/900-00025">High Speed Parallax servos</a>, which run on 6-8V instead of 5V, and at speeds up to 180RPM. This involved purchasing new voltage regulators that would output within that range, drawing from a 9V battery.</p>     
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/servo-schematic.jpg" alt="Servo Schematic">
                  <div align="left">
                    <p>We had to use two separate voltage regulators--one for each servo--due to the rating for the regulators compared to the current draw of the servos. While the abo circuit worked and the servos were able to run on the 6.2V output, they took too much time to accelerate and decelerate and were thus less predictable. Line following became erratic due to each movement being an overcorrection. We switched back to the regular Parallax servos distributed in class for competition.</p>
                    <p>For the microphone, we briefly attempted to use the <a href="http://www.embedded.com/design/embedded/4024443/The-Goertzel-Algorithm">Goertzel algorithm</a> instead of FFT due to the simplicity of the code. We thought this would require less memory due to the significantly lower sampling rate--but it did not integrate well into our code. With familiarity with the FFT code, we chose to sample at 64 samples instead of the initial 256 to decrease memory usage. </p>
                    <p>Additionally, while soldering the circuits for our filters and amplifiers to perfboards seemed ideal to avoid accidentally pulling out wires and organizing the system, between the shortage of components in the lab and the time it would have taken to unit test the re-done circuits, we decided our time would be put to better use in other ways.</p>
                    <h2 id="cost-analysis">Cost Analysis</h2>
                    <table border="1">
                      <tr>
                        <th>Part</th>
                        <th>Cost Per Part</th>
                        <th>Quantity</th>
                        <th>Total</th>
                      </tr>
                      <tr>
                        <td>Line Sensor</td>
                        <td>$3</td>
                        <td>4</td>
                        <td>$12</td>
                      </tr>
                      <tr>
                        <td>IR Sensor</td>
                        <td>$7</td>
                        <td>3</td>
                        <td>$21</td>
                      </tr>
                      <tr>
                        <td>Parallax Servo>
                        <td>$13</td>
                        <td>2</td>
                        <td>$26</td>
                      </tr>
                      <tr>
                        <td>Linear Regulator</td>
                        <td>$0.37</td>
                        <td>3</td>
                        <td>$1.11</td>
                      </tr>
                      <tr>
                        <td>High Speed Parallax Servo</td>
                        <td>$16.99</td>
                        <td>2</td>
                        <td>$33.98</td>
                      </tr>
                      <tr>
                        <th>Total</th>
                        <th></th>
                        <th></th>
                        <th>$98.88</th>
                      </tr>
                    </table>
                    <p>For the most part, we used the standard number of each part when building Brooklynn. This included 3 IR sensors for seeing walls and 2 parallax servos for movement. We decided to use 4 line sensors on our robot, while some other teams chose to rely on as few as 3 and as many as 5 sensors. Parts such as resistors, wires, breadboards, and capacitors did not count towards our budget. We also 3D printed a couple of small components, but did not count those towards the final cost either. The parts that made it on the robot equated to exactly $60, nearly $40 less than our final budget. This is due to us buying (and not using) 2 aftermarket servos and corresponding linear regulators to power the servos. Although they went unused, the component costs (and shipping) must be included in our budget. Overall, we were $1.12 under our $100 budget.</p>               
                    <h2 id="final-competition">Final Competition</h2>                 
                    <p>At the final competition, we were cautiously optimistic about how Brooklyn would fare against the competition. In theory, we had everything working, and a perfect score was possible. We had several 9V batteries on standby and charged our on-board battery in preparation for the competition. Unfortunately though, things did not go as expected. For the first round, our robot seemingly couldn’t properly follow a line. It would overcorrect when it moved slightly off the black tape, and this would lead to Brooklynn to veer off the track into walls. We tried several times to reset the robot and see if it could complete the maze on its own, but after what felt like dozens of failures, we resorted to physically correcting the robot whenever it began to veer off course. This ultimately prevented us from proceeding to the final rounds.</p>              
                    <p>Before our second round, we went back to the drawing board to determine what went wrong during Brooklynn’s first run. Everything was working the night before, so what could be the issue now? Since nothing changed with our code overnight, we believed that our issue had to have been caused by a physical change on the robot. The only things changed were our batteries, so we identified that our issue had to be down to something with them. Since the robot had been overcorrecting, and the on board battery had just been fully charged overnight, our conclusion was that the battery had been overcharged and was sending a higher voltage than our servos were calibrated for. We couldn’t change the battery at this point, so we modified the line following code to compensate for the higher voltage and turn the same amount it had been throughout the semester. We then tested our changes to make sure Brooklynn could once again follow a line, and were ready for the second round.</p> 
                    <p>The second round was much better in terms of performance. Brooklynn completed the maze, found all treasures, and sent a done signal. Our only mistake was a missed packet which resulted in a missing square on our screen. Overall, however, everything went according to plan. We received almost all possible points, and had a highly successful run as seen in the video below. Had the first round gone so smoothly, we probably would have made it to the final round too.</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=71OXjyamLDU"><img src="http://img.youtube.com/vi/71OXjyamLDU/0.jpg" alt="Round 2" /></a></p>
                  <div align="left">
                    <p>There were other facets of the competition to mention as well. Our team won a 3D printed bear for best verilog code, mainly thanks to Emmett. Emmett was our go-to for anything verilog, and towards the end of the semester even the TA’s would send others to him for assistance on their verilog code. We also decided to run our robot in the final maze after the competition, just to see how we would’ve fared (a video of this is shown below). Brooklynn completed the maze perfectly, not even missing a packet this time. Although we were upset to not have made it to the final round, it was good to know that our team was successful in completing all tasks in time for the competition.</p>
                  </div>
                  <p><a href="https://www.youtube.com/watch?v=UwR2fGmrs84"><img src="http://img.youtube.com/vi/UwR2fGmrs84/0.jpg" alt="Round 2" /></a></p>      
                  <div align="left">
                    <h2 id="closing-thoughts">Closing Thoughts</h2>
                    <p>The semester of ECE 3400 was filled with ups and downs, but in the end we were able to complete everything that was asked for, despite the results at the competition. Ideally, we would’ve wanted our high speed parallax servos to work the way we liked, and for our robot to be more reliable at detecting treasures instead of requiring to stop at every intersection to detect a treasure, but our final version of Brooklynn performed up to task. We did incredibly well with our display and VGA code thanks to Emmett, and David was able to successfully implement Dijkstra’s algorithm to make the robot as efficient at navigating the maze as possible.</p>
                    <p>And a final and huge <b>thank you</b> to the TAs and Kirstin! Between our truly endless hours spent in PHL427 and our infinite stream of questions, there is no way Brooklynn could have come near to completion without your help. Thank you for clearing up our confusions in lab, helping us in the adventure of 3D printing for the first time, guiding us through long and painful debugging processes, and lecturing on helpful and interesting material--to say the least. It’s been a really fun and educational semester for all of us. Thank you for making ECE 3400 what it is.</p>    
                  </div>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/brooklynn-final.jpg" alt="Brooklynn">       
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Final Competition</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
                                      
                                      
        <!-- August/September Notes -->
    <div class="portfolio-modal modal fade" id="augustseptember" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h2 id="september-14">September 14</h2>
                    <ul>
                    <li>Attendance: everyone is here</li>
                    <li>Potentially adding gears to increase speed
                    <ul>
                    <li>Distribute weight over bearings in future?</li>
                    </ul></li>
                    <li>Servos go different speeds backwards: need to modify speeds</li>
                    <li>Speed of turning
                    <ul>
                    <li>Not to implement a full point turn, but partial</li>
                    </ul></li>
                    <li>Sensors
                    <ul>
                    <li>Do we want wall sensors running at all times or @ every intersection?
                    <ul>
                    <li>Will decide later</li>
                    </ul></li>
                    </ul></li>
                    <li>Return to lab 2
                    <ul>
                    <li>Need amplifier</li>
                    <li>Distinguish 660Hz tone from either side</li>
                    <li>“nicely merged?”</li>
                    </ul></li>
                    <li>Milestone
                    <ul>
                    <li>speed of servos/turning</li>
                    </ul></li>
                    <li>Emmett, sofya, dylan: Friday afternoon lab</li>
                    <li>David, amanda: Saturday @ 2 lab</li>
                    </ul>
                    <h2 id="september-15">September 15</h2>
                    <ul>
                    <li>Attendence: everyone is here</li>
                    <li>Milestone 1
                    <ul>
                    <li>Fixed common ground issue
                    <ul>
                    <li>Which fixed significant speed difference of servos
                    <ul>
                    <li>Switched to pin 11 for right servo, need to change figure 8 code accordingly</li>
                    </ul></li>
                    </ul></li>
                    <li>Can find running average of sensor data
                    <ul>
                    <li>Long run: memory issue</li>
                    </ul></li>
                    <li>Time-based turn versus sensor-based turn</li>
                    <li>Test figure 8 code in lab later today
                    <ul>
                    <li>Additionally fix turns if time permits</li>
                    </ul></li>
                    <li>Add rubber bands</li>
                    <li>Build amplifier circuit for treasures</li>
                    <li>Video of line following and figure 8</li>
                    </ul></li>
                    <li>Lab 2
                    <ul>
                    <li>Saturday lab</li>
                    <li>Band pass filter for microphone
                    <ul>
                    <li>Wasn’t working with Arduino</li>
                    </ul></li>
                    <li>FFT audio and treasure code on Github</li>
                    </ul></li>
                    <li>Reports
                    <ul>
                    <li>Emmett: Fourier part, audio</li>
                    <li>Amanda: oscilloscope testing, treasures</li>
                    <li>Sofya: hardware, schematics</li>
                    <li>Dylan: software (milestone)</li>
                    <li>David: wiring, testing, debugging, improvements</li>
                    </ul></li>
                    </ul>
                    <h2 id="september-21">September 21</h2>
                    <ul>
                    <li>Attendance: everyone is here</li>
                    <li>Milestone 2</li>
                    <li>Analog: 4 line sensors, 3 wall sensors, 2 IR, (+1 microphone in future)
                    <ul>
                    <li>Schmitt Trigger
                    <ul>
                    <li>What can be digital</li>
                    <li>6 analog pins: 2 line, 2 IR, 1 wall (front facing)</li>
                    </ul></li>
                    </ul></li>
                    <li>Digital: 2 line (outer), 2 wall (sides)</li>
                    <li>Change line sensors?
                    <ul>
                    <li>5: like in lecture, one in center–potential for feedback control (PID)?
                    <ul>
                    <li>Slightly more precise, more memory vs current implementation?</li>
                    </ul></li>
                    <li>Implement PID with our current 4 line sensors?
                    <ul>
                    <li>To worry about in the future</li>
                    </ul></li>
                    </ul></li>
                    <li>For now:
                    <ul>
                    <li>Use 3 short sensors</li>
                    <li>Add 2 side wall sensors to be digital</li>
                    <li>Front wall sensor to be analog</li>
                    <li>Switch 2 outside line to digital</li>
                    <li>Add 2 IR sensors: both analog
                    <ul>
                    <li>Add code to “signal”</li>
                    </ul></li>
                    </ul></li>
                    </ul>
                    <h2 id="september-28">September 28</h2>
                    <ul>
                    <li>Attendance: everyone is here</li>
                    <li>Monday status:
                    <ul>
                    <li>No line sensor Schmitt triggers yet</li>
                    <li>Inputs/outputs for Arduino are all unplugged but power and ground currently ready</li>
                    <li>Extended Arduino pins for easier access</li>
                    </ul></li>
                    <li>Lab 3: lab due date?
                    <ul>
                    <li>Fall break??</li>
                    <li>Prelims :(</li>
                    <li>Thursday meeting next week
                    <ul>
                    <li>Meet on Friday instead</li>
                    </ul></li>
                    <li>Make sure Quartus works</li>
                    <li>Prelab!</li>
                    </ul></li>
                    <li>Team assessment—due Saturday</li>
                    </ul>
                    <h2 id="september-29">September 29</h2>
                    <ul>
                    <li>Attendance: Amanda, Emmett, Dylan, Sofya</li>
                    <li>Lab 3
                    <ul>
                    <li>Voted on Piazza poll</li>
                    <li>Audio team: David, Emmett</li>
                    <li>Graphics team: Amanda, Dylan, Sofya</li>
                    </ul></li>
                    <li>Reminder to fill out Team Assessment by tomorrow!</li>
                    <li>Schmitt triggers for line sensors?
                    <ul>
                    <li>Narrower threshold; just need to go to open lab sometime</li>
                    </ul></li>
                    <li>Team names?
                    <ul>
                    <li>New York themed??</li>
                    <li>Memes</li>
                    </ul></li>
                    <li>Modifying website structure
                    <ul>
                    <li>Adding sidebar</li>
                    </ul></li>
                    </ul>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Meeting Minutes</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>   
                                        
    <!-- October Notes -->
    <div class="portfolio-modal modal fade" id="october" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h2 id="october-12">October 12</h2>
                    <ul>
                    <li>Lab 3
                    <ul>
                    <li>Graphics
                    <ul>
                    <li>Pixel grouping explanation
                    <ul>
                    <li>By row/column</li>
                    </ul></li>
                    <li>Need to implement Arduino communication</li>
                    <li>Go in 7:30 lab today</li>
                    </ul></li>
                    <li>Audio
                    <ul>
                    <li>Will go in Friday</li>
                    </ul></li>
                    <li>Nicely merged code?</li>
                    </ul></li>
                    </ul>
                    <h2 id="october-19">October 19</h2>
                    <ul>
                    <li>All going in to lab today</li>
                    <li>No state array yet
                    <ul>
                    <li>Can take info from variable and map pictures to walls and squares</li>
                    <li>Can use any picture, run through Matlab thing</li>
                    <li>State array needs:
                    <ul>
                    <li>Walls: undiscovered, not there, there, 3 treasures</li>
                    </ul></li>
                    <li>Robot needs to determine orientation</li>
                    </ul></li>
                    <li>Implement 4x5 grid with 1 byte packet for alb
                    <ul>
                    <li>Can implement walls and other information after getting lab 4 working</li>
                    </ul></li>
                    </ul>
                    <h2 id="october-20">October 20</h2>
                    <ul>
                    <li>Emmett, Amanda to lab today
                    <ul>
                    <li>Try not powering FPGA before uploading code</li>
                    </ul></li>
                    <li>Discussion of issues currently with communication
                    <ul>
                    <li>Pin 0 not working?</li>
                    <li>FPGA not working??</li>
                    </ul></li>
                    <li>Future discussion:
                    <ul>
                    <li>Lab days to go in</li>
                    <li>Perf board for Schmitt triggers</li>
                    <li>Finish other Schmitt triggers</li>
                    <li>Treasure sensors mounting
                    <ul>
                    <li>Code and wiring needs to be integrated</li>
                    </ul></li>
                    <li>Do we want to use mux?
                    <ul>
                    <li>Microphone</li>
                    </ul></li>
                    <li>Mounting microphone</li>
                    <li>Look into exploration algorithms</li>
                    <li>Organize state machine–what it would do in each state</li>
                    </ul></li>
                    <li>Physical switch/potentiometer for starting orientation
                    <ul>
                    <li>Keep track of orientation and box</li>
                    </ul></li>
                    </ul>
                    <h2 id="october-26">October 26</h2>
                    <ul>
                    <li>Lecture content/slides</li>
                    <li>Schmitt Triggers are done
                    <ul>
                    <li>Outer two lines, side wall sensors</li>
                    <li>Need to change code to reflect this</li>
                    </ul></li>
                    <li>Milestone 3
                    <ul>
                    <li>Simulation first</li>
                    </ul></li>
                    <li>Thursday night lab:
                    <ul>
                    <li>Everyone but Sofya can make it for some time</li>
                    <li>Re-implement Lab 4/SPI</li>
                    <li>Graphics portion</li>
                    </ul></li>
                    <li>Friday afternoon:
                    <ul>
                    <li>David until 3, Dylan starting 2:30, Amanda can make it</li>
                    </ul></li>
                    <li>Saturday night:
                    <ul>
                    <li>David tentative</li>
                    </ul></li>
                    <li>Sofya will be back at some point around here</li>
                    <li>Monday afternoon:
                    <ul>
                    <li>normal lab, we’ll all be there</li>
                    </ul></li>
                    <li>Monday night:
                    <ul>
                    <li>Tentative Emmett</li>
                    <li>Tentative Amanda</li>
                    </ul></li>
                    <li>Tuesday afternoon:
                    <ul>
                    <li>David</li>
                    <li>Amanda at some point probably</li>
                    <li>Emmett at some point probably</li>
                    </ul></li>
                    <li>Wednesday:
                    <ul>
                    <li>Dylan</li>
                    <li>Emmett at some point probably</li>
                    </ul></li>
                    </ul>
                    <h2 id="october-27">October 27</h2>
                    <ul>
                    <li>Put SPI on backburner for now</li>
                    <li>Fixing actual turning and line sensing
                    <ul>
                    <li>Discussion on fastest turning</li>
                    </ul></li>
                    <li>Python simulation for milestone 3</li>
                    <li>Dylan, David, Amanda will head to lab today
                    <ul>
                    <li>Fix robot, continue Python simulation</li>
                    </ul></li>
                    </ul>
                  </div>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Meeting Minutes</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>  
                                        
    <!-- November Notes -->
    <div class="portfolio-modal modal fade" id="november" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <div align="left">
                    <h2 id="november-2">November 2</h2>
                    <ul>
                    <li>Simulation
                    <ul>
                    <li>Needs finish signal
                    <ul>
                    <li>Add in lab tonight</li>
                    </ul></li>
                    <li>Need video</li>
                    </ul></li>
                    <li>Lab today
                    <ul>
                    <li>Emmett possibly (SPI)</li>
                    <li>“Go to desired square, turn toward desired direction”
                    <ul>
                    <li>Amanda</li>
                    <li>Dylan</li>
                    </ul></li>
                    <li>Arduino logic
                    <ul>
                    <li>David</li>
                    </ul></li>
                    </ul></li>
                    <li>Walk through simulation code to implement in Arduino later
                    <ul>
                    <li>Need to implement in Arduino/C</li>
                    <li>Robot is currently functional; just need to write code</li>
                    </ul></li>
                    <li>How to communicate maze?
                    <ul>
                    <li>X,Y vs index</li>
                    <li>Sending 12 bits
                    <ul>
                    <li>X X X | Y Y | N E S W | T T T</li>
                    <li>1 1 1 | 1 1 | whatever = done signal?</li>
                    <li>FPGA will need to determine 9x7 coordinates vs 5x4</li>
                    </ul></li>
                    </ul></li>
                    </ul>
                    <h2 id="november-3">November 3</h2>
                    <ul>
                    <li>Discussion of turning/destination logic
                    <ul>
                    <li>Notes posted in Slack</li>
                    <li>Will go to lab at 1:30</li>
                    </ul></li>
                    <li>DFS implementation on Arduino
                    <ul>
                    <li>David</li>
                    </ul></li>
                    <li>Finish signal in simulation done
                    <ul>
                    <li>Video will be posted on youtube</li>
                    </ul></li>
                    <li>Writeup
                    <ul>
                    <li>Backtracking: Sofya</li>
                    <li>Turning: Dylan</li>
                    <li>Base simulation: Amanda</li>
                    <li>Conversion to Arduino: David</li>
                    </ul></li>
                    </ul>
                    <h2 id="november-10">November 10</h2>
                    <ul>
                    <li>Discussion of attendance?</li>
                    <li>Packet data
                    <ul>
                    <li>/ | D | T T T | W W W W | O O | X X X | Y Y</li>
                    </ul></li>
                    <li>Old stuff
                    <ul>
                    <li>Need to finish DFS on robot</li>
                    <li>Fix front wall sensor sensitivity</li>
                    </ul></li>
                    <li>Milestone 4
                    <ul>
                    <li>Mount treasure sensors</li>
                    <li>Send/receive full packet of data
                    <ul>
                    <li>Create packets, add lab 4 code</li>
                    </ul></li>
                    <li>Write code from previous labs into main DFS code
                    <ul>
                    <li>Interrupt-based</li>
                    <li>Treasure sensing</li>
                    </ul></li>
                    <li>Display… everything 😥
                    <ul>
                    <li>Walls</li>
                    <li>Treasures</li>
                    <li>Done signal</li>
                    </ul></li>
                    </ul></li>
                    <li>Else
                    <ul>
                    <li>Mount microphone</li>
                    <li>Integrate code</li>
                    </ul></li>
                    <li>Lab schedule
                    <ul>
                    <li>Friday
                    <ul>
                    <li>Emmett</li>
                    <li>Amanda</li>
                    </ul></li>
                    <li>Saturday
                    <ul>
                    <li>Sofya at 5</li>
                    <li>Amanda for a period of time</li>
                    <li>Emmett for a period of time</li>
                    </ul></li>
                    <li>Monday
                    <ul>
                    <li>Lab section</li>
                    </ul></li>
                    <li>Tuesday
                    <ul>
                    <li>David</li>
                    <li>Emmett</li>
                    </ul></li>
                    <li>Wednesday
                    <ul>
                    <li>Amanda</li>
                    <li>Sofya</li>
                    <li>David</li>
                    </ul></li>
                    <li>Thursday
                    <ul>
                    <li>Sofya</li>
                    <li>Amanda</li>
                    <li>Emmett</li>
                    <li>David</li>
                    </ul></li>
                    <li>Friday
                    <ul>
                    <li>Sofya</li>
                    <li>David</li>
                    <li>Amanda</li>
                    </ul></li>
                    <li>Saturday
                    <ul>
                    <li>Uhh</li>
                    </ul></li>
                    <li>Monday
                    <ul>
                    <li>Mandatory team meeting</li>
                    <li>Lab section</li>
                    <li>😥</li>
                    </ul></li>
                    </ul></li>
                    <li>Ethics homework Monday after break
                    <ul>
                    <li>Next Thursday team meeting</li>
                    </ul></li>
                    <li>Team evals due Saturday</li>
                    </ul>
                    <h2 id="november-16">November 16</h2>
                    <ul>
                    <li>Servos and linear regulators are ordered and on the way</li>
                    <li>Ethics assignment
                    <ul>
                    <li>Essay
                    <ul>
                    <li>~100 words each by Sunday</li>
                    <li>Intro/stakeholders: Amanda</li>
                    <li>Utilitarian: Dylan</li>
                    <li>Justice: Emmett</li>
                    <li>Virtue: David</li>
                    <li>Economic/social/political constraints, creative solutions: Sofya</li>
                    </ul></li>
                    </ul></li>
                    <li>3D printed treasure sensors during lab</li>
                    <li>Make website nicer
                    <ul>
                    <li>Bootstrap</li>
                    </ul></li>
                    <li>Make graphics for maze</li>
                    <li>Need to finish treasure sensors</li>
                    <li>Test radio send code</li>
                    <li>Modify finish tone (themed?)</li>
                    </ul>
                    <h2 id="november-27">November 27</h2>
                    <ul>
                    <li>Display
                    <ul>
                    <li>Top walls don’t show up</li>
                    <li>Otherwise, mostly done</li>
                    <li>Photos will be added later (to save compilation time)</li>
                    </ul></li>
                    <li>Robot
                    <ul>
                    <li>Treasure sensors:
                    <ul>
                    <li>Currently should spin if treasure detected</li>
                    <li>Seems to constantly detect treasures</li>
                    </ul></li>
                    <li>Modifying DFS/Dijkstra’s</li>
                    </ul></li>
                    <li>Other things
                    <ul>
                    <li>Soldering
                    <ul>
                    <li>Perf boards have arrived</li>
                    </ul></li>
                    <li>Tentative replacing motors</li>
                    <li>Mounting treasure sensors
                    <ul>
                    <li>And make them work</li>
                    </ul></li>
                    </ul></li>
                    <li>Ethics assignment</li>
                    <li>Tuesday
                    <ul>
                    <li>David</li>
                    <li>Sofya maybe</li>
                    <li>Amanda</li>
                    <li>Emmett for some time</li>
                    </ul></li>
                    <li>Wednesday
                    <ul>
                    <li>Emmett maybe</li>
                    <li>Amanda maybe</li>
                    <li>Dylan maybe</li>
                    </ul></li>
                    <li>Thursday
                    <ul>
                    <li>Sofya after 3</li>
                    <li>Dylan</li>
                    <li>David after 3</li>
                    <li>Emmett</li>
                    <li>Amanda maybe</li>
                    </ul></li>
                    <li>Friday
                    <ul>
                    <li>Sofya</li>
                    <li>Amanda</li>
                    <li>Dylan<br />
                    </li>
                    </ul></li>
                    <li>Saturday
                    <ul>
                    <li>Sofya maybe</li>
                    <li>Amanda maybe?</li>
                    <li>Dylan maybe</li>
                    </ul></li>
                    <li>Sunday
                    <ul>
                    <li>Sofya</li>
                    <li>Amanda maybe</li>
                    <li>Dylan</li>
                    </ul></li>
                    </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                  Close Meeting Minutes</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
                                        
                                        
    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Contact form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/agency.min.js"></script>

  </body>

</html>
